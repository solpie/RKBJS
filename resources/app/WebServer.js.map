{"version":3,"sources":["webpack:///webpack/bootstrap 6b705f80a5336f861249","webpack:///./src/WebServer.ts","webpack:///./src/router/AdminRouter.ts","webpack:///./src/Env.ts","webpack:///external \"path\"","webpack:///./src/router/PanelRouter.ts","webpack:///./src/model/RkbModel.ts","webpack:///./src/view/const.ts","webpack:///./src/view/Command.ts","webpack:///./src/model/GameRkbInfo.ts","webpack:///./src/model/PlayerInfo.ts","webpack:///./src/model/BaseInfo.ts","webpack:///external \"process\"","webpack:///external \"fs\"","webpack:///external \"http\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,iCAAiC;AACxE,kCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAiE,iBAAiB,6BAA6B;AAC/G;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;AACA;;;;;;;AC3EA;AACA;AACA;AACA,0BAAyB,0DAA0D;AACnF,EAAC;;;;;;;ACJD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;;;;;;;ACPtB,kC;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA,0BAAyB,sGAAsG;AAC/H,EAAC;AACD;AACA;AACA,iCAAgC,sGAAsG;AACtI,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,EAAC;;;;;;;ACzBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,8EAA6E,0DAA0D;AACvI,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAsF,sCAAsC;AAC5H;AACA;AACA;AACA,wFAAuF,wCAAwC;AAC/H;AACA;AACA;AACA,uFAAsF,sCAAsC;AAC5H;AACA;AACA;AACA,wFAAuF,wCAAwC;AAC/H;AACA;AACA;AACA,oFAAmF,4CAA4C;AAC/H;AACA;AACA;AACA,uFAAsF,uBAAuB;AAC7G;AACA;AACA;AACA,uFAAsF,uBAAuB;AAC7G;AACA;AACA;AACA,sFAAqF,qBAAqB;AAC1G;AACA;AACA;AACA,sFAAqF,qBAAqB;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAuF,wCAAwC;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAmF,iDAAiD;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC7QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClCA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACnKA;AACA;AACA;AACA;AACA;AACA,WAAU,oCAAoC;AAC9C,WAAU,oCAAoC;AAC9C,WAAU,oCAAoC;AAC9C,WAAU,oCAAoC;AAC9C,WAAU,sCAAsC;AAChD,WAAU,qCAAqC;AAC/C,WAAU,qCAAqC;AAC/C,WAAU,sCAAsC;AAChD,WAAU,sCAAsC;AAChD,YAAW,sCAAsC;AACjD,YAAW,sCAAsC;AACjD,YAAW,sCAAsC;AACjD,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,yBAAyB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,+BAA+B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC1KA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACtCA,qC;;;;;;ACAA,gC;;;;;;ACAA,kC","file":"WebServer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6b705f80a5336f861249","\"use strict\";\r\nvar AdminRouter_1 = require(\"./router/AdminRouter\");\r\nvar Env_1 = require(\"./Env\");\r\nvar PanelRouter_1 = require(\"./router/PanelRouter\");\r\nvar RkbModel_1 = require(\"./model/RkbModel\");\r\nvar WebServer = (function () {\r\n    function WebServer(callback) {\r\n        this.initEnv(callback);\r\n        this.test();\r\n    }\r\n    WebServer.prototype.test = function () {\r\n    };\r\n    WebServer.prototype.initEnv = function (callback) {\r\n        var _this = this;\r\n        var process = require(\"process\");\r\n        Env_1.ServerConf.isDev = process.defaultApp || /[\\\\/]electron-prebuilt[\\\\/]/.test(process.execPath);\r\n        console.log(process.execPath, Env_1.ServerConf.isDev);\r\n        var fs = require('fs');\r\n        fs.readFile('resources/app/package.json', function (err, data) {\r\n            if (err)\r\n                throw err;\r\n            var dataObj = JSON.parse(data);\r\n            Env_1.ServerConf.port = dataObj.server.port;\r\n            _this.initServer();\r\n            _this.serverConf = Env_1.ServerConf;\r\n            console.log(\"server config:\", Env_1.ServerConf);\r\n            if (callback)\r\n                callback(dataObj);\r\n        });\r\n    };\r\n    WebServer.prototype.initServer = function () {\r\n        var _this = this;\r\n        var app = express();\r\n        app.set('views', \"./resources/app/view\");\r\n        app.engine('ejs', ejs.renderFile);\r\n        app.set('view engine', 'ejs');\r\n        app.use(express.static(\"./resources/app/static\"));\r\n        app.use(bodyParser.urlencoded({ extended: false, limit: '55mb' }));\r\n        app.use(bodyParser.json({ limit: '50mb' }));\r\n        app.all(\"*\", function (req, res, next) {\r\n            var start = new Date().getTime();\r\n            res.header('Access-Control-Allow-Origin', '*');\r\n            res.header(\"Access-Control-Allow-Headers\", \"Content-Type,Content-Length, Authorization, Accept,X-Requested-With\");\r\n            res.header(\"Access-Control-Allow-Methods\", \"PUT,POST,GET,DELETE,OPTIONS\");\r\n            if (req.method == 'OPTIONS') {\r\n                res.send(200);\r\n            }\r\n            else {\r\n                next();\r\n                var ms = new Date().getTime() - start;\r\n                if (req.url.search('.png') > -1) {\r\n                }\r\n                else\r\n                    console.log('%c%s %s - %s ms', \"color: Green;font-weight:bold; background-color: LimeGreen;\", req.method, req.url, ms);\r\n            }\r\n        });\r\n        app.get('/', function (req, res) {\r\n            res.redirect('/admin');\r\n        });\r\n        app.use('/admin', AdminRouter_1.adminRouter);\r\n        app.use('/panel', PanelRouter_1.panelRouter);\r\n        var server = require('http').createServer(app);\r\n        server.listen(Env_1.ServerConf.port, function () {\r\n            _this.initSocketIO(server);\r\n            console.log(\"server on:\", Env_1.ServerConf.port);\r\n        });\r\n    };\r\n    WebServer.prototype.initSocketIO = function (server) {\r\n        var io = new SocketIO(server);\r\n        var rkbModel = new RkbModel_1.RkbModel(io);\r\n    };\r\n    return WebServer;\r\n}());\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = WebServer;\r\nexports.webServer = new WebServer();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/WebServer.ts\n// module id = 0\n// module chunks = 0","\"use strict\";\r\nexports.adminRouter = express.Router();\r\nexports.adminRouter.get('/', function (req, res) {\r\n    res.render('admin', { version: 0.5, opUrlArr: ['http://123', '21'].toString() });\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/router/AdminRouter.ts\n// module id = 1\n// module chunks = 0","\"use strict\";\r\nvar Node_path = require(\"path\");\r\nexports._path = function (path) {\r\n    if (!exports.ServerConf.isDev)\r\n        return Node_path.join('resources', path);\r\n    return path;\r\n};\r\nexports.ServerConf = { isDev: false, hupuWsUrl: '' };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Env.ts\n// module id = 2\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 3\n// module chunks = 0","\"use strict\";\r\nvar Env_1 = require(\"../Env\");\r\nexports.panelRouter = express.Router();\r\nexports.panelRouter.get('/', function (req, res) {\r\n    console.log('get panel:');\r\n    res.render('panel', { host: Env_1.ServerConf.host, wsPort: Env_1.ServerConf.wsPort, hupuWsUrl: Env_1.ServerConf.hupuWsUrl });\r\n});\r\nexports.panelRouter.get('/screen', function (req, res) {\r\n    console.log('get screen:');\r\n    res.render('screen/index', { host: Env_1.ServerConf.host, wsPort: Env_1.ServerConf.wsPort, hupuWsUrl: Env_1.ServerConf.hupuWsUrl });\r\n});\r\nexports.panelRouter.get('/auto/bracket/:game_id', function (req, res) {\r\n    console.log('get /auto/bracket', req.params.game_id);\r\n    var game_id = req.params.game_id;\r\n    var api1 = 'http://api.liangle.com/api/passerbyking/game/top8Match/' + game_id;\r\n    rest(api1).then(function (response) {\r\n        res.send(JSON.parse(response.entity));\r\n    });\r\n});\r\nexports.panelRouter.get('/auto/player/:game_id', function (req, res) {\r\n    var game_id = req.params.game_id;\r\n    var api1 = 'http://api.liangle.com/api/passerbyking/game/players/' + game_id;\r\n    rest(api1).then(function (response) {\r\n        res.send(JSON.parse(response.entity));\r\n    });\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/router/PanelRouter.ts\n// module id = 4\n// module chunks = 0","\"use strict\";\r\nvar const_1 = require(\"../view/const\");\r\nvar Command_1 = require(\"../view/Command\");\r\nvar Env_1 = require(\"../Env\");\r\nvar GameRkbInfo_1 = require(\"./GameRkbInfo\");\r\nvar PanelRouter_1 = require(\"../router/PanelRouter\");\r\nvar RkbModel = (function () {\r\n    function RkbModel(io) {\r\n        var _this = this;\r\n        this.gameInfo = new GameRkbInfo_1.GameRkbInfo();\r\n        io.on('connection', function () {\r\n        });\r\n        io = io.of(\"/\" + const_1.PanelId.rkbPanel);\r\n        io\r\n            .on(\"connect\", function (socket) {\r\n            console.log('connect');\r\n            socket.emit(\"\" + Command_1.CommandId.initPanel, const_1.ScParam({ gameInfo: _this.gameInfo, isDev: Env_1.ServerConf.isDev }));\r\n        })\r\n            .on('disconnect', function (socket) {\r\n            console.log('disconnect');\r\n        });\r\n        this.emit = function (cmd, param) {\r\n            io.emit(cmd, param);\r\n        };\r\n        this.initHupuAuto();\r\n        this.initOp();\r\n    }\r\n    RkbModel.prototype.initHupuAuto = function () {\r\n        rest('http://test.jrstvapi.hupu.com/zhubo/getNodeServer').then(function (response) {\r\n            var a = JSON.parse(response.entity);\r\n            if (a && a.length) {\r\n                Env_1.ServerConf.hupuWsUrl = a[0];\r\n            }\r\n        });\r\n    };\r\n    RkbModel.prototype.initOp = function () {\r\n        var _this = this;\r\n        PanelRouter_1.panelRouter.post(\"/stage1v1/:cmdId\", function (req, res) {\r\n            if (!req.body)\r\n                return res.sendStatus(400);\r\n            var cmdId = req.params.cmdId;\r\n            var param = req.body;\r\n            console.log(\"/stage1v1/\" + cmdId);\r\n            var cmdMap = {};\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_minLeftScore)] = function () {\r\n                _this.gameInfo.minLeftScore();\r\n                _this.emit(\"\" + Command_1.CommandId.updateLeftScore, const_1.ScParam({ leftScore: _this.gameInfo.leftScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_minRightScore)] = function () {\r\n                _this.gameInfo.minRightScore();\r\n                _this.emit(\"\" + Command_1.CommandId.updateRightScore, const_1.ScParam({ rightScore: _this.gameInfo.rightScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_addLeftScore)] = function () {\r\n                var straight = _this.gameInfo.addLeftScore();\r\n                _this.emit(\"\" + Command_1.CommandId.updateLeftScore, const_1.ScParam({ leftScore: _this.gameInfo.leftScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_addRightScore)] = function () {\r\n                var straight = _this.gameInfo.addRightScore();\r\n                _this.emit(\"\" + Command_1.CommandId.updateRightScore, const_1.ScParam({ rightScore: _this.gameInfo.rightScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_unLimitScore)] = function (param) {\r\n                _this.gameInfo.unLimitScore = param.unLimitScore;\r\n                _this.emit(\"\" + Command_1.CommandId.unLimitScore, const_1.ScParam({ unLimitScore: _this.gameInfo.unLimitScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_addRightFoul)] = function () {\r\n                var rightFoul = _this.gameInfo.addRightFoul();\r\n                _this.emit(\"\" + Command_1.CommandId.updateRightFoul, const_1.ScParam({ rightFoul: rightFoul }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_minRightFoul)] = function () {\r\n                var rightFoul = _this.gameInfo.minRightFoul();\r\n                _this.emit(\"\" + Command_1.CommandId.updateRightFoul, const_1.ScParam({ rightFoul: rightFoul }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_addLeftFoul)] = function () {\r\n                var leftFoul = _this.gameInfo.addLeftFoul();\r\n                _this.emit(\"\" + Command_1.CommandId.updateLeftFoul, const_1.ScParam({ leftFoul: leftFoul }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_minLeftFoul)] = function () {\r\n                var leftFoul = _this.gameInfo.minLeftFoul();\r\n                _this.emit(\"\" + Command_1.CommandId.updateLeftFoul, const_1.ScParam({ leftFoul: leftFoul }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_resetGame)] = function (param) {\r\n                return _this.cs_resetGame(param, cmdMap);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_toggleTimer)] = function (param) {\r\n                if (param) {\r\n                    _this.gameInfo.toggleTimer(param.state);\r\n                    _this.emit(\"\" + Command_1.CommandId.toggleTimer, const_1.ScParam(param));\r\n                }\r\n                else {\r\n                    _this.gameInfo.toggleTimer();\r\n                    _this.emit(\"\" + Command_1.CommandId.toggleTimer);\r\n                }\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_resetTimer)] = function () {\r\n                _this.gameInfo.resetTimer();\r\n                _this.emit(\"\" + Command_1.CommandId.resetTimer);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayer)] = function (param) {\r\n                return _this.cs_updatePlayer(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayerAll)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updateKingPlayer)] = function (param) {\r\n                _this.gameInfo.kingPlayer = param.kingPlayer;\r\n                _this.emit(\"\" + Command_1.CommandId.updateKingPlayer, const_1.ScParam({ kingPlayer: _this.gameInfo.kingPlayer }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayerState)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setActPlayer)] = function (param) {\r\n                return _this.cs_setActPlayer(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setGameIdx)] = function (param) {\r\n                _this.gameInfo.gameIdx = param.gameIdx;\r\n                _this.emit(\"\" + Command_1.CommandId.setGameIdx, const_1.ScParam(param));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInActivityPanel)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeOutActivityPanel)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.fadeOutActivityPanel);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayerBackNum)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.updatePlayerBackNum, const_1.ScParam(param));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_startingLine)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.startingLine, const_1.ScParam({ playerDocArr: _this.gameInfo.getPlayerDocArr() }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_hideStartingLine)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.hideStartingLine);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInCountDown)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.fadeInCountDown, param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeOutCountDown)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.fadeOutCountDown);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInWinPanel)] = function (param) {\r\n                var isBlueWin = _this.gameInfo.leftScore > _this.gameInfo.rightScore;\r\n                var playerDoc;\r\n                if (isBlueWin)\r\n                    playerDoc = _this.gameInfo.getPlayerDocArr()[0];\r\n                else\r\n                    playerDoc = _this.gameInfo.getPlayerDocArr()[1];\r\n                if (playerDoc.id == Env_1.ServerConf.king) {\r\n                    playerDoc.isKing = true;\r\n                }\r\n                _this.emit(\"\" + Command_1.CommandId.fadeInWinPanel, const_1.ScParam({\r\n                    isBlue: isBlueWin,\r\n                    playerDoc: playerDoc\r\n                }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeOutWinPanel)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.fadeOutWinPanel);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_getBracketPlayerByIdx)] = function (param) {\r\n                var actDoc = _this.getActDoc();\r\n                var bracketIdx = param.bracketIdx;\r\n                var bracketDoc = actDoc.bracket[bracketIdx];\r\n                console.log('bracketDoc', bracketDoc);\r\n                if (bracketDoc) {\r\n                    cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayer)]({\r\n                        idx: 0,\r\n                        playerId: bracketDoc.gameInfoArr[0].id\r\n                    });\r\n                    cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayer)]({\r\n                        idx: 1,\r\n                        playerId: bracketDoc.gameInfoArr[1].id\r\n                    });\r\n                }\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setBracketPlayer)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_refreshClient)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_changeColor)] = function (param) {\r\n                return _this.cs_changeColor(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_clearActPlayerGameRec)] = function (param) {\r\n                return _this.cs_clearActPlayerGameRec(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updateWinScore)] = function (param) {\r\n                return _this.cs_updateWinScore(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_saveGameRec)] = function (param) {\r\n                return _this.cs_saveGameRec(param, res);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setCursorPlayer)] = function (param) {\r\n                return _this.cs_setCursorPlayer(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_saveToTotalScore)] = function (param) {\r\n                return _this.cs_saveToTotalScore(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInPlayerRank)] = function (param) {\r\n                return _this.cs_fadeInPlayerRank(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInFtRank)] = function (param) {\r\n                return _this.cs_fadeInFtRank(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInFTShow)] = function (param) {\r\n                return _this.cs_fadeInFTShow(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeOutFTShow)] = function (param) {\r\n                return _this.cs_fadeOutFTShow(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInMixRank)] = function (param) {\r\n                return _this.cs_fadeInMixRank(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setScorePanelVisible)] = function (param) {\r\n                return _this.cs_setScorePanelVisible(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_autoSaveGameRec)] = function (param) {\r\n                return _this.cs_autoSaveGameRec(param);\r\n            };\r\n            var isSend = cmdMap[cmdId](param);\r\n            if (!isSend)\r\n                res.sendStatus(200);\r\n        });\r\n    };\r\n    RkbModel.prototype.cs_autoSaveGameRec = function (param) {\r\n        this.emit(\"\" + Command_1.CommandId.setScorePanelVisible, const_1.ScParam(param));\r\n    };\r\n    RkbModel.prototype.cs_setScorePanelVisible = function (param) {\r\n        this.emit(\"\" + Command_1.CommandId.setScorePanelVisible, const_1.ScParam(param));\r\n    };\r\n    RkbModel.prototype.cs_updatePlayer = function (param) {\r\n        var playerId = param.playerId;\r\n        var playerIdx = param.idx;\r\n    };\r\n    RkbModel.prototype.getFlyPlayerDoc = function (id) {\r\n    };\r\n    RkbModel.prototype.cs_clearActPlayerGameRec = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_saveToTotalScore = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_setCursorPlayer = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_changeColor = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_resetGame = function (param, cmdMap) {\r\n    };\r\n    RkbModel.prototype.cs_saveGameRec = function (param, res) {\r\n    };\r\n    RkbModel.prototype.cs_updateWinScore = function (param) {\r\n        console.log('cs_updateWinScore', param);\r\n        this.gameInfo.winScore = param.winScore;\r\n        this.emit(\"\" + Command_1.CommandId.updateWinScore, const_1.ScParam(param));\r\n    };\r\n    RkbModel.prototype.cs_setActPlayer = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_fadeInFTShow = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_fadeOutFTShow = function (param) {\r\n        this.emit(\"\" + Command_1.CommandId.fadeOutFTShow, param);\r\n    };\r\n    RkbModel.prototype.cs_fadeInFtRank = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_fadeInMixRank = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_fadeInPlayerRank = function (param) {\r\n    };\r\n    RkbModel.prototype.startGame = function (gameId) {\r\n    };\r\n    RkbModel.prototype.refreshBracket = function (actDoc) {\r\n    };\r\n    RkbModel.prototype.getActDoc = function () {\r\n    };\r\n    RkbModel.prototype.quePlayer = function (playerId, isout) {\r\n    };\r\n    return RkbModel;\r\n}());\r\nexports.RkbModel = RkbModel;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/RkbModel.ts\n// module id = 5\n// module chunks = 0","\"use strict\";\r\nexports.PanelId = {\r\n    stagePanel: 'stage',\r\n    stage1v1Panel: 'stage1v1',\r\n    rkbPanel: 'rkb',\r\n    bracketPanel: 'bracket',\r\n    winPanel: 'win',\r\n    actPanel: 'act',\r\n    screenPanel: 'screen',\r\n    playerPanel: 'player'\r\n};\r\nexports.ServerConst = {\r\n    SEND_ASYNC: true,\r\n    DEF_AVATAR: '/img/panel/stage1v1/blue.png'\r\n};\r\nexports.ViewConst = {\r\n    STAGE_WIDTH: 1920,\r\n    STAGE_HEIGHT: 1080\r\n};\r\nexports.TimerState = {\r\n    START_STR: 'start',\r\n    PAUSE_STR: 'pause',\r\n    PAUSE: 0,\r\n    RUNNING: 1\r\n};\r\nexports.ViewEvent = {\r\n    PLAYER_EDIT: 'edit player',\r\n    PLAYER_ADD: 'add player',\r\n    STRAIGHT3_LEFT: 'STRAIGHT3_LEFT',\r\n    STRAIGHT3_RIGHT: 'STRAIGHT3_RIGHT'\r\n};\r\nfunction ScParam(param) {\r\n    return param;\r\n}\r\nexports.ScParam = ScParam;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/const.ts\n// module id = 6\n// module chunks = 0","\"use strict\";\r\nexports.JParam = function (o) {\r\n    return { jstr: JSON.stringify(o) };\r\n};\r\n(function (CommandId) {\r\n    CommandId[CommandId[\"dmkPush\"] = 0] = \"dmkPush\";\r\n    CommandId[CommandId[\"ShowConsoleWin\"] = 100000] = \"ShowConsoleWin\";\r\n    CommandId[CommandId[\"toggleTracker\"] = 100001] = \"toggleTracker\";\r\n    CommandId[CommandId[\"toggleBallRolling\"] = 100002] = \"toggleBallRolling\";\r\n    CommandId[CommandId[\"toggleTimer\"] = 100003] = \"toggleTimer\";\r\n    CommandId[CommandId[\"cs_toggleTimer\"] = 100004] = \"cs_toggleTimer\";\r\n    CommandId[CommandId[\"resetTimer\"] = 100005] = \"resetTimer\";\r\n    CommandId[CommandId[\"cs_resetTimer\"] = 100006] = \"cs_resetTimer\";\r\n    CommandId[CommandId[\"disableTracker\"] = 100007] = \"disableTracker\";\r\n    CommandId[CommandId[\"updateLeftScore\"] = 100008] = \"updateLeftScore\";\r\n    CommandId[CommandId[\"cs_addLeftScore\"] = 100009] = \"cs_addLeftScore\";\r\n    CommandId[CommandId[\"updateRightScore\"] = 100010] = \"updateRightScore\";\r\n    CommandId[CommandId[\"cs_addRightScore\"] = 100011] = \"cs_addRightScore\";\r\n    CommandId[CommandId[\"updateLeftBall\"] = 100012] = \"updateLeftBall\";\r\n    CommandId[CommandId[\"updateRightBall\"] = 100013] = \"updateRightBall\";\r\n    CommandId[CommandId[\"cs_addLeftBall\"] = 100014] = \"cs_addLeftBall\";\r\n    CommandId[CommandId[\"cs_addRightBall\"] = 100015] = \"cs_addRightBall\";\r\n    CommandId[CommandId[\"cs_minLeftBall\"] = 100016] = \"cs_minLeftBall\";\r\n    CommandId[CommandId[\"cs_minRightBall\"] = 100017] = \"cs_minRightBall\";\r\n    CommandId[CommandId[\"cs_updateInitBallCount\"] = 100018] = \"cs_updateInitBallCount\";\r\n    CommandId[CommandId[\"minLeftScore\"] = 100019] = \"minLeftScore\";\r\n    CommandId[CommandId[\"cs_minLeftScore\"] = 100020] = \"cs_minLeftScore\";\r\n    CommandId[CommandId[\"minRightScore\"] = 100021] = \"minRightScore\";\r\n    CommandId[CommandId[\"cs_minRightScore\"] = 100022] = \"cs_minRightScore\";\r\n    CommandId[CommandId[\"updateLeftFoul\"] = 100023] = \"updateLeftFoul\";\r\n    CommandId[CommandId[\"cs_addLeftFoul\"] = 100024] = \"cs_addLeftFoul\";\r\n    CommandId[CommandId[\"cs_minLeftFoul\"] = 100025] = \"cs_minLeftFoul\";\r\n    CommandId[CommandId[\"updateRightFoul\"] = 100026] = \"updateRightFoul\";\r\n    CommandId[CommandId[\"cs_addRightFoul\"] = 100027] = \"cs_addRightFoul\";\r\n    CommandId[CommandId[\"cs_minRightFoul\"] = 100028] = \"cs_minRightFoul\";\r\n    CommandId[CommandId[\"cs_updateLeftSkill\"] = 100029] = \"cs_updateLeftSkill\";\r\n    CommandId[CommandId[\"updateLeftSkill\"] = 100030] = \"updateLeftSkill\";\r\n    CommandId[CommandId[\"cs_updateRightSkill\"] = 100031] = \"cs_updateRightSkill\";\r\n    CommandId[CommandId[\"updateRightSkill\"] = 100032] = \"updateRightSkill\";\r\n    CommandId[CommandId[\"stageFadeOut\"] = 100033] = \"stageFadeOut\";\r\n    CommandId[CommandId[\"cs_fadeOut\"] = 100034] = \"cs_fadeOut\";\r\n    CommandId[CommandId[\"playerScore\"] = 100035] = \"playerScore\";\r\n    CommandId[CommandId[\"cs_playerScore\"] = 100036] = \"cs_playerScore\";\r\n    CommandId[CommandId[\"stageFadeIn\"] = 100037] = \"stageFadeIn\";\r\n    CommandId[CommandId[\"cs_stageFadeIn\"] = 100038] = \"cs_stageFadeIn\";\r\n    CommandId[CommandId[\"moveStagePanel\"] = 100039] = \"moveStagePanel\";\r\n    CommandId[CommandId[\"cs_moveStagePanel\"] = 100040] = \"cs_moveStagePanel\";\r\n    CommandId[CommandId[\"updatePlayer\"] = 100041] = \"updatePlayer\";\r\n    CommandId[CommandId[\"cs_updatePlayer\"] = 100042] = \"cs_updatePlayer\";\r\n    CommandId[CommandId[\"updatePlayerAll\"] = 100043] = \"updatePlayerAll\";\r\n    CommandId[CommandId[\"cs_changeColor\"] = 100044] = \"cs_changeColor\";\r\n    CommandId[CommandId[\"cs_updatePlayerAll\"] = 100045] = \"cs_updatePlayerAll\";\r\n    CommandId[CommandId[\"cs_updatePlayerBackNum\"] = 100046] = \"cs_updatePlayerBackNum\";\r\n    CommandId[CommandId[\"updatePlayerBackNum\"] = 100047] = \"updatePlayerBackNum\";\r\n    CommandId[CommandId[\"fadeInNotice\"] = 100048] = \"fadeInNotice\";\r\n    CommandId[CommandId[\"cs_fadeInNotice\"] = 100049] = \"cs_fadeInNotice\";\r\n    CommandId[CommandId[\"cs_resetGame\"] = 100050] = \"cs_resetGame\";\r\n    CommandId[CommandId[\"cs_toggleDmk\"] = 100051] = \"cs_toggleDmk\";\r\n    CommandId[CommandId[\"toggleDmk\"] = 100052] = \"toggleDmk\";\r\n    CommandId[CommandId[\"resetGame\"] = 100053] = \"resetGame\";\r\n    CommandId[CommandId[\"cs_unLimitScore\"] = 100054] = \"cs_unLimitScore\";\r\n    CommandId[CommandId[\"unLimitScore\"] = 100055] = \"unLimitScore\";\r\n    CommandId[CommandId[\"cs_updatePlayerState\"] = 100056] = \"cs_updatePlayerState\";\r\n    CommandId[CommandId[\"updatePlayerState\"] = 100057] = \"updatePlayerState\";\r\n    CommandId[CommandId[\"cs_setGameIdx\"] = 100058] = \"cs_setGameIdx\";\r\n    CommandId[CommandId[\"setGameIdx\"] = 100059] = \"setGameIdx\";\r\n    CommandId[CommandId[\"fadeInWinPanel\"] = 100060] = \"fadeInWinPanel\";\r\n    CommandId[CommandId[\"cs_fadeInWinPanel\"] = 100061] = \"cs_fadeInWinPanel\";\r\n    CommandId[CommandId[\"fadeOutWinPanel\"] = 100062] = \"fadeOutWinPanel\";\r\n    CommandId[CommandId[\"cs_fadeOutWinPanel\"] = 100063] = \"cs_fadeOutWinPanel\";\r\n    CommandId[CommandId[\"saveGameRec\"] = 100064] = \"saveGameRec\";\r\n    CommandId[CommandId[\"cs_saveGameRec\"] = 100065] = \"cs_saveGameRec\";\r\n    CommandId[CommandId[\"cs_fadeInFinalPlayer\"] = 100066] = \"cs_fadeInFinalPlayer\";\r\n    CommandId[CommandId[\"fadeInFinalPlayer\"] = 100067] = \"fadeInFinalPlayer\";\r\n    CommandId[CommandId[\"cs_fadeOutFinalPlayer\"] = 100068] = \"cs_fadeOutFinalPlayer\";\r\n    CommandId[CommandId[\"fadeOutFinalPlayer\"] = 100069] = \"fadeOutFinalPlayer\";\r\n    CommandId[CommandId[\"cs_setActPlayer\"] = 100070] = \"cs_setActPlayer\";\r\n    CommandId[CommandId[\"cs_setBracketPlayer\"] = 100071] = \"cs_setBracketPlayer\";\r\n    CommandId[CommandId[\"cs_clearActPlayerGameRec\"] = 100072] = \"cs_clearActPlayerGameRec\";\r\n    CommandId[CommandId[\"cs_getBracketPlayerByIdx\"] = 100073] = \"cs_getBracketPlayerByIdx\";\r\n    CommandId[CommandId[\"cs_refreshClient\"] = 100074] = \"cs_refreshClient\";\r\n    CommandId[CommandId[\"refreshClient\"] = 100075] = \"refreshClient\";\r\n    CommandId[CommandId[\"cs_updateWinScore\"] = 100076] = \"cs_updateWinScore\";\r\n    CommandId[CommandId[\"updateWinScore\"] = 100077] = \"updateWinScore\";\r\n    CommandId[CommandId[\"cs_updateKingPlayer\"] = 100078] = \"cs_updateKingPlayer\";\r\n    CommandId[CommandId[\"updateKingPlayer\"] = 100079] = \"updateKingPlayer\";\r\n    CommandId[CommandId[\"cs_setCursorPlayer\"] = 100080] = \"cs_setCursorPlayer\";\r\n    CommandId[CommandId[\"setCursorPlayer\"] = 100081] = \"setCursorPlayer\";\r\n    CommandId[CommandId[\"cs_saveToTotalScore\"] = 100082] = \"cs_saveToTotalScore\";\r\n    CommandId[CommandId[\"cs_setScorePanelVisible\"] = 100083] = \"cs_setScorePanelVisible\";\r\n    CommandId[CommandId[\"setScorePanelVisible\"] = 100084] = \"setScorePanelVisible\";\r\n    CommandId[CommandId[\"cs_autoSaveGameRec\"] = 100085] = \"cs_autoSaveGameRec\";\r\n    CommandId[CommandId[\"cs_startingLine\"] = 100086] = \"cs_startingLine\";\r\n    CommandId[CommandId[\"startingLine\"] = 100087] = \"startingLine\";\r\n    CommandId[CommandId[\"cs_hideStartingLine\"] = 100088] = \"cs_hideStartingLine\";\r\n    CommandId[CommandId[\"hideStartingLine\"] = 100089] = \"hideStartingLine\";\r\n    CommandId[CommandId[\"cs_queryPlayerByPos\"] = 100090] = \"cs_queryPlayerByPos\";\r\n    CommandId[CommandId[\"fadeInPlayerPanel\"] = 100091] = \"fadeInPlayerPanel\";\r\n    CommandId[CommandId[\"cs_fadeInPlayerPanel\"] = 100092] = \"cs_fadeInPlayerPanel\";\r\n    CommandId[CommandId[\"fadeOutPlayerPanel\"] = 100093] = \"fadeOutPlayerPanel\";\r\n    CommandId[CommandId[\"cs_fadeOutPlayerPanel\"] = 100094] = \"cs_fadeOutPlayerPanel\";\r\n    CommandId[CommandId[\"movePlayerPanel\"] = 100095] = \"movePlayerPanel\";\r\n    CommandId[CommandId[\"cs_movePlayerPanel\"] = 100096] = \"cs_movePlayerPanel\";\r\n    CommandId[CommandId[\"straightScore3\"] = 100097] = \"straightScore3\";\r\n    CommandId[CommandId[\"straightScore5\"] = 100098] = \"straightScore5\";\r\n    CommandId[CommandId[\"initPanel\"] = 100099] = \"initPanel\";\r\n    CommandId[CommandId[\"cs_fadeInActivityPanel\"] = 100100] = \"cs_fadeInActivityPanel\";\r\n    CommandId[CommandId[\"fadeInActivityPanel\"] = 100101] = \"fadeInActivityPanel\";\r\n    CommandId[CommandId[\"cs_fadeInNextActivity\"] = 100102] = \"cs_fadeInNextActivity\";\r\n    CommandId[CommandId[\"fadeInNextActivity\"] = 100103] = \"fadeInNextActivity\";\r\n    CommandId[CommandId[\"cs_fadeInActivityExGame\"] = 100104] = \"cs_fadeInActivityExGame\";\r\n    CommandId[CommandId[\"fadeInActivityExGame\"] = 100105] = \"fadeInActivityExGame\";\r\n    CommandId[CommandId[\"cs_fadeOutActivityPanel\"] = 100106] = \"cs_fadeOutActivityPanel\";\r\n    CommandId[CommandId[\"fadeOutActivityPanel\"] = 100107] = \"fadeOutActivityPanel\";\r\n    CommandId[CommandId[\"cs_startGame\"] = 100108] = \"cs_startGame\";\r\n    CommandId[CommandId[\"cs_restartGame\"] = 100109] = \"cs_restartGame\";\r\n    CommandId[CommandId[\"cs_fadeInRankPanel\"] = 100110] = \"cs_fadeInRankPanel\";\r\n    CommandId[CommandId[\"fadeInRankPanel\"] = 100111] = \"fadeInRankPanel\";\r\n    CommandId[CommandId[\"cs_fadeInNextRank\"] = 100112] = \"cs_fadeInNextRank\";\r\n    CommandId[CommandId[\"fadeInNextRank\"] = 100113] = \"fadeInNextRank\";\r\n    CommandId[CommandId[\"cs_setGameComing\"] = 100114] = \"cs_setGameComing\";\r\n    CommandId[CommandId[\"setGameComing\"] = 100115] = \"setGameComing\";\r\n    CommandId[CommandId[\"cs_fadeOutRankPanel\"] = 100116] = \"cs_fadeOutRankPanel\";\r\n    CommandId[CommandId[\"fadeOutRankPanel\"] = 100117] = \"fadeOutRankPanel\";\r\n    CommandId[CommandId[\"cs_fadeInCountDown\"] = 100118] = \"cs_fadeInCountDown\";\r\n    CommandId[CommandId[\"fadeInCountDown\"] = 100119] = \"fadeInCountDown\";\r\n    CommandId[CommandId[\"cs_fadeOutCountDown\"] = 100120] = \"cs_fadeOutCountDown\";\r\n    CommandId[CommandId[\"fadeOutCountDown\"] = 100121] = \"fadeOutCountDown\";\r\n    CommandId[CommandId[\"cs_inScreenScore\"] = 100122] = \"cs_inScreenScore\";\r\n    CommandId[CommandId[\"inScreenScore\"] = 100123] = \"inScreenScore\";\r\n    CommandId[CommandId[\"cs_fadeInFTShow\"] = 100124] = \"cs_fadeInFTShow\";\r\n    CommandId[CommandId[\"fadeInFTShow\"] = 100125] = \"fadeInFTShow\";\r\n    CommandId[CommandId[\"cs_fadeOutFTShow\"] = 100126] = \"cs_fadeOutFTShow\";\r\n    CommandId[CommandId[\"fadeOutFTShow\"] = 100127] = \"fadeOutFTShow\";\r\n    CommandId[CommandId[\"cs_fadeInPlayerRank\"] = 100128] = \"cs_fadeInPlayerRank\";\r\n    CommandId[CommandId[\"fadeInPlayerRank\"] = 100129] = \"fadeInPlayerRank\";\r\n    CommandId[CommandId[\"cs_fadeInFtRank\"] = 100130] = \"cs_fadeInFtRank\";\r\n    CommandId[CommandId[\"fadeInFtRank\"] = 100131] = \"fadeInFtRank\";\r\n    CommandId[CommandId[\"cs_fadeInMixRank\"] = 100132] = \"cs_fadeInMixRank\";\r\n    CommandId[CommandId[\"fadeInMixRank\"] = 100133] = \"fadeInMixRank\";\r\n    CommandId[CommandId[\"cs_findPlayerData\"] = 100134] = \"cs_findPlayerData\";\r\n    CommandId[CommandId[\"cs_attack\"] = 100135] = \"cs_attack\";\r\n    CommandId[CommandId[\"attack\"] = 100136] = \"attack\";\r\n    CommandId[CommandId[\"cs_addHealth\"] = 100137] = \"cs_addHealth\";\r\n    CommandId[CommandId[\"addHealth\"] = 100138] = \"addHealth\";\r\n    CommandId[CommandId[\"fadeInOK\"] = 100139] = \"fadeInOK\";\r\n    CommandId[CommandId[\"cs_combo\"] = 100140] = \"cs_combo\";\r\n    CommandId[CommandId[\"combo\"] = 100141] = \"combo\";\r\n})(exports.CommandId || (exports.CommandId = {}));\r\nvar CommandId = exports.CommandId;\r\nvar CommandItem = (function () {\r\n    function CommandItem(id) {\r\n        this.id = id;\r\n    }\r\n    return CommandItem;\r\n}());\r\nvar Command = (function () {\r\n    function Command() {\r\n        this.cmdArr = [];\r\n        console.log(\"CommandId\", CommandId);\r\n    }\r\n    return Command;\r\n}());\r\nexports.Command = Command;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/Command.ts\n// module id = 7\n// module chunks = 0","\"use strict\";\r\nvar PlayerInfo_1 = require(\"./PlayerInfo\");\r\nvar BaseInfo_1 = require(\"./BaseInfo\");\r\nvar const_1 = require(\"../view/const\");\r\nexports.bracketMap = {\r\n    \"1\": { 'loser': [5, 0], 'winner': [7, 0] },\r\n    \"2\": { 'loser': [5, 1], 'winner': [7, 1] },\r\n    \"3\": { 'loser': [6, 0], 'winner': [8, 0] },\r\n    \"4\": { 'loser': [6, 1], 'winner': [8, 1] },\r\n    \"5\": { 'loser': [-1, 0], 'winner': [10, 1] },\r\n    \"6\": { 'loser': [-1, 0], 'winner': [9, 1] },\r\n    \"7\": { 'loser': [9, 0], 'winner': [11, 0] },\r\n    \"8\": { 'loser': [10, 0], 'winner': [11, 1] },\r\n    \"9\": { 'loser': [-1, 0], 'winner': [12, 1] },\r\n    \"10\": { 'loser': [-1, 0], 'winner': [12, 0] },\r\n    \"11\": { 'loser': [13, 0], 'winner': [14, 0] },\r\n    \"12\": { 'loser': [-1, 0], 'winner': [13, 1] },\r\n    \"13\": { 'loser': [-1, 0], 'winner': [14, 1] }\r\n};\r\nvar GameRkbInfo = (function () {\r\n    function GameRkbInfo(gameDoc) {\r\n        this.leftFoul = 0;\r\n        this.rightFoul = 0;\r\n        this.playerInfoArr = new Array(2);\r\n        this.gameIdx = 0;\r\n        this.winScore = 2;\r\n        this.gameState = 0;\r\n        this.kingPlayer = 0;\r\n        this._timer = null;\r\n        this.timerState = 0;\r\n        this.time = 0;\r\n        this.rightScore = 0;\r\n        this.leftScore = 0;\r\n        this._startDate = new Date().getTime();\r\n        if (gameDoc) {\r\n            BaseInfo_1.setPropTo(gameDoc, this);\r\n            var playerDocArr = this.playerInfoArr;\r\n            this.playerInfoArr = [];\r\n            for (var i = 0; i < playerDocArr.length; i++) {\r\n                this.playerInfoArr.push(new PlayerInfo_1.PlayerInfo(playerDocArr[i]));\r\n            }\r\n        }\r\n    }\r\n    GameRkbInfo.prototype.addLeftScore = function () {\r\n        if (this.unLimitScore === 1)\r\n            this.leftScore += 1;\r\n        else\r\n            this.leftScore = (this.leftScore + 1) % (this.winScore + 1);\r\n    };\r\n    GameRkbInfo.prototype.addRightScore = function () {\r\n        if (this.unLimitScore === 1)\r\n            this.rightScore += 1;\r\n        else\r\n            this.rightScore = (this.rightScore + 1) % (this.winScore + 1);\r\n    };\r\n    GameRkbInfo.prototype.minRightScore = function () {\r\n        this.rightScore = (this.rightScore - 1) % (this.winScore + 1);\r\n    };\r\n    GameRkbInfo.prototype.minLeftScore = function () {\r\n        this.leftScore = (this.leftScore - 1) % (this.winScore + 1);\r\n    };\r\n    GameRkbInfo.prototype.setPlayerInfoByIdx = function (pos, playerInfo) {\r\n        this.playerInfoArr[pos] = playerInfo;\r\n        return playerInfo;\r\n    };\r\n    GameRkbInfo.prototype.saveGameResult = function () {\r\n        if (this.gameState === 0) {\r\n            var isBlueWin = this.leftScore > this.rightScore;\r\n            var bluePlayerDoc = this.playerInfoArr[0].playerData;\r\n            var redPlayerDoc = this.playerInfoArr[1].playerData;\r\n            bluePlayerDoc.ftScore ? bluePlayerDoc.ftScore += this.leftScore : bluePlayerDoc.ftScore = this.leftScore;\r\n            bluePlayerDoc.curFtScore ? bluePlayerDoc.curFtScore += this.leftScore : bluePlayerDoc.curFtScore = this.leftScore;\r\n            bluePlayerDoc.dtScore = this.leftScore;\r\n            redPlayerDoc.ftScore ? redPlayerDoc.ftScore += this.rightScore : redPlayerDoc.ftScore = this.rightScore;\r\n            redPlayerDoc.curFtScore ? redPlayerDoc.curFtScore += this.rightScore : redPlayerDoc.curFtScore = this.rightScore;\r\n            redPlayerDoc.dtScore = this.rightScore;\r\n            if (isBlueWin) {\r\n                this.loserPlayerInfo = this.playerInfoArr[1];\r\n                this.loserPlayerInfo.isBlue = false;\r\n                this.winner_Idx = [this.playerInfoArr[0].playerData.id, 0];\r\n                this.loser_Idx = [this.playerInfoArr[1].playerData.id, 1];\r\n                PlayerInfo_1.PlayerInfo.addWinGameAmount(this.playerInfoArr[0].playerData);\r\n                PlayerInfo_1.PlayerInfo.addLoseGameAmount(this.playerInfoArr[1].playerData);\r\n            }\r\n            else {\r\n                this.winner_Idx = [this.playerInfoArr[1].playerData.id, 1];\r\n                this.loser_Idx = [this.playerInfoArr[0].playerData.id, 0];\r\n                this.loserPlayerInfo = this.playerInfoArr[0];\r\n                this.loserPlayerInfo.isBlue = true;\r\n                PlayerInfo_1.PlayerInfo.addLoseGameAmount(this.playerInfoArr[0].playerData);\r\n                PlayerInfo_1.PlayerInfo.addWinGameAmount(this.playerInfoArr[1].playerData);\r\n            }\r\n            this.gameState = 1;\r\n        }\r\n    };\r\n    Object.defineProperty(GameRkbInfo.prototype, \"isFinish\", {\r\n        get: function () {\r\n            return this.gameState != 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GameRkbInfo.prototype.getGameDoc = function () {\r\n        var g = {};\r\n        var date = new Date();\r\n        g.time = this.time;\r\n        var winner = this.playerInfoArr[this.winner_Idx[1]].playerData;\r\n        var loser = this.playerInfoArr[this.loser_Idx[1]].playerData;\r\n        g.idx = this.gameIdx;\r\n        g.start = this._startDate;\r\n        g.end = date.getTime();\r\n        var gameDoc = function (playerDoc) {\r\n            return { name: playerDoc.name, _id: playerDoc._id, score: playerDoc.dtScore };\r\n        };\r\n        g.blueFoul = this.leftFoul;\r\n        g.redFoul = this.rightFoul;\r\n        g.winner = gameDoc(winner);\r\n        g.loser = gameDoc(loser);\r\n        console.log('getGameDoc', g);\r\n        return g;\r\n    };\r\n    GameRkbInfo.prototype.getPlayerDocArr = function () {\r\n        var a = [];\r\n        for (var i = 0; i < this.playerInfoArr.length; i++) {\r\n            a.push(this.playerInfoArr[i].playerData);\r\n        }\r\n        return a;\r\n    };\r\n    GameRkbInfo.prototype.toggleTimer = function (state) {\r\n        var _this = this;\r\n        if (state) {\r\n            if (state === const_1.TimerState.PAUSE) {\r\n                this.resetTimer();\r\n            }\r\n        }\r\n        else {\r\n            if (this._timer) {\r\n                this.resetTimer();\r\n            }\r\n            else {\r\n                this._timer = setInterval(function () {\r\n                    _this.time++;\r\n                }, 1000);\r\n                this.timerState = 1;\r\n            }\r\n        }\r\n    };\r\n    GameRkbInfo.prototype.resetTimer = function () {\r\n        clearInterval(this._timer);\r\n        this._timer = 0;\r\n        this.timerState = 0;\r\n    };\r\n    GameRkbInfo.prototype.addRightFoul = function () {\r\n        this.rightFoul++;\r\n        return this.rightFoul;\r\n    };\r\n    GameRkbInfo.prototype.minRightFoul = function () {\r\n        this.rightFoul--;\r\n        return this.rightFoul;\r\n    };\r\n    GameRkbInfo.prototype.addLeftFoul = function () {\r\n        this.leftFoul++;\r\n        return this.leftFoul;\r\n    };\r\n    GameRkbInfo.prototype.minLeftFoul = function () {\r\n        this.leftFoul--;\r\n        return this.leftFoul;\r\n    };\r\n    return GameRkbInfo;\r\n}());\r\nexports.GameRkbInfo = GameRkbInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/GameRkbInfo.ts\n// module id = 8\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BaseInfo_1 = require(\"./BaseInfo\");\r\nvar PlayerDoc = (function () {\r\n    function PlayerDoc() {\r\n        this.id = 0;\r\n        this.name = '';\r\n        this.phone = 0;\r\n        this.eloScore = 0;\r\n        this.style = 0;\r\n        this.avatar = \"\";\r\n        this.height = 0;\r\n        this.weight = 0;\r\n        this.dtScore = 0;\r\n        this.activityId = 0;\r\n        this.gameRec = [];\r\n        this.loseGameCount = 0;\r\n        this.winGameCount = 0;\r\n        this.ftId = 0;\r\n        this.ftScore = 0;\r\n        this.playerNum = 0;\r\n        this.curFtScore = 0;\r\n        this.location = '上海';\r\n    }\r\n    return PlayerDoc;\r\n}());\r\nexports.PlayerDoc = PlayerDoc;\r\nexports.PlayerState1v1 = {\r\n    FIGHTING: ' ',\r\n    PIGEON: '鸽子',\r\n    WAITING: '  ',\r\n    Dead: '淘汰'\r\n};\r\nvar PlayerInfo = (function (_super) {\r\n    __extends(PlayerInfo, _super);\r\n    function PlayerInfo(playerData) {\r\n        _super.call(this);\r\n        this.playerData = new PlayerDoc();\r\n        this.isRed = true;\r\n        this.isMvp = false;\r\n        this.backNumber = 0;\r\n        if (playerData) {\r\n            if (playerData['playerData'] != null) {\r\n                this.playerData = BaseInfo_1.obj2Class(playerData.playerData, PlayerDoc);\r\n                this.setPlayerInfoFromData(playerData);\r\n            }\r\n            else {\r\n                this.playerData = BaseInfo_1.obj2Class(playerData, PlayerDoc);\r\n                this.setPlayerInfoFromData(playerData);\r\n            }\r\n        }\r\n    }\r\n    PlayerInfo.prototype.setPlayerInfoFromData = function (data) {\r\n        if (data['isRed'] != null)\r\n            this.isRed = data.isRed;\r\n        if (data['isMvp'] != null)\r\n            this.isMvp = data.isMvp;\r\n        if (data['backNumber'] != null)\r\n            this.backNumber = data.backNumber;\r\n    };\r\n    PlayerInfo.prototype.getPlayerData = function () {\r\n        this.playerData['isRed'] = this.isRed;\r\n        this.playerData['isMvp'] = this.isMvp;\r\n        this.playerData['backNumber'] = this.backNumber;\r\n        return this.playerData;\r\n    };\r\n    PlayerInfo.prototype.id = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"id\", val);\r\n    };\r\n    PlayerInfo.prototype.phone = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"phone\", val);\r\n    };\r\n    PlayerInfo.prototype.name = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"name\", val);\r\n    };\r\n    PlayerInfo.prototype.activityId = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"activityId\", val);\r\n    };\r\n    PlayerInfo.prototype.eloScore = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"eloScore\", val);\r\n    };\r\n    PlayerInfo.prototype.dtScore = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"dtScore\", val);\r\n    };\r\n    PlayerInfo.prototype.style = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"style\", val);\r\n    };\r\n    PlayerInfo.prototype.avatar = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"avatar\", val);\r\n    };\r\n    PlayerInfo.prototype.gameRec = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"gameRec\", val);\r\n    };\r\n    PlayerInfo.winPercent = function (playerDoc) {\r\n        var p = playerDoc.winGameCount / PlayerInfo.gameCount(playerDoc);\r\n        if (!p)\r\n            p = 0;\r\n        return p;\r\n    };\r\n    PlayerInfo.winPercentStr = function (playerDoc) {\r\n        return (PlayerInfo.winPercent(playerDoc) * 100).toFixed(1) + \"%\";\r\n    };\r\n    PlayerInfo.weight = function (playerDoc) {\r\n        return playerDoc.weight || playerDoc.playerData.weight;\r\n    };\r\n    PlayerInfo.height = function (playerDoc) {\r\n        return playerDoc.height || playerDoc.playerData.height;\r\n    };\r\n    PlayerInfo.intro = function (playerDoc) {\r\n        return playerDoc.intro || playerDoc.playerData.intro;\r\n    };\r\n    PlayerInfo.prototype.winpercent = function (val) {\r\n        return this.winGameCount() / this.gameCount();\r\n    };\r\n    PlayerInfo.gameCount = function (playerDoc) {\r\n        return (playerDoc.loseGameCount + playerDoc.winGameCount) || 0;\r\n    };\r\n    PlayerInfo.addWinGameAmount = function (playerDoc) {\r\n        playerDoc.winGameCount++;\r\n        return playerDoc.winGameCount;\r\n    };\r\n    PlayerInfo.addLoseGameAmount = function (playerDoc) {\r\n        playerDoc.loseGameCount++;\r\n        return playerDoc.loseGameCount;\r\n    };\r\n    PlayerInfo.prototype.gameCount = function () {\r\n        return this.loseGameCount() + this.winGameCount();\r\n    };\r\n    PlayerInfo.prototype.winGameCount = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"winGameCount\", val);\r\n    };\r\n    PlayerInfo.prototype.loseGameCount = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"loseGameCount\", val);\r\n    };\r\n    PlayerInfo.prototype.getWinPercent = function () {\r\n        return (this.winpercent() * 100).toFixed(1) + \"%\";\r\n    };\r\n    PlayerInfo.getStyleIcon = function (style) {\r\n        var path = '/img/panel/stage/';\r\n        if (style === 1) {\r\n            path += 'feng.png';\r\n        }\r\n        else if (style === 2) {\r\n            path += 'lin.png';\r\n        }\r\n        else if (style === 3) {\r\n            path += 'huo.png';\r\n        }\r\n        else if (style === 4) {\r\n            path += 'shan.png';\r\n        }\r\n        return path;\r\n    };\r\n    PlayerInfo.prototype.getWinStyleIcon = function () {\r\n        var path = '/img/panel/stage/win/';\r\n        if (this.style() == 1) {\r\n            path += 'fengWin.png';\r\n        }\r\n        else if (this.style() == 2) {\r\n            path += 'linWin.png';\r\n        }\r\n        else if (this.style() == 3) {\r\n            path += 'huoWin.png';\r\n        }\r\n        else if (this.style() == 4) {\r\n            path += 'shanWin.png';\r\n        }\r\n        return path;\r\n    };\r\n    PlayerInfo.prototype.getRec = function () {\r\n        return { id: this.id(), eloScore: this.eloScore(), dtScore: this.dtScore() };\r\n    };\r\n    PlayerInfo.prototype.saveScore = function (dtScore, isWin) {\r\n        this.dtScore(dtScore);\r\n        this.eloScore(this.eloScore() + dtScore);\r\n        if (isWin) {\r\n            this.winGameCount(this.winGameCount() + 1);\r\n        }\r\n        else\r\n            this.loseGameCount(this.loseGameCount() + 1);\r\n    };\r\n    PlayerInfo.prototype.getCurWinningPercent = function () {\r\n        return this.winGameCount() / (this.loseGameCount() + this.winGameCount());\r\n    };\r\n    return PlayerInfo;\r\n}(BaseInfo_1.BaseInfo));\r\nexports.PlayerInfo = PlayerInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/PlayerInfo.ts\n// module id = 9\n// module chunks = 0","\"use strict\";\r\nexports.isdef = function (val) {\r\n    return val != undefined;\r\n};\r\nexports.prop = function (obj, paramName, v, callback) {\r\n    if (exports.isdef(v)) {\r\n        obj[paramName] = v;\r\n        if (callback)\r\n            callback();\r\n    }\r\n    else\r\n        return obj[paramName];\r\n};\r\nexports.obj2Class = function (obj, cls) {\r\n    var c = new cls;\r\n    for (var paramName in obj) {\r\n        c[paramName] = obj[paramName];\r\n    }\r\n    return c;\r\n};\r\nfunction setPropTo(data, obj) {\r\n    for (var key in data) {\r\n        if (obj.hasOwnProperty(key))\r\n            obj[key] = data[key];\r\n    }\r\n}\r\nexports.setPropTo = setPropTo;\r\nvar BaseDoc = (function () {\r\n    function BaseDoc() {\r\n    }\r\n    return BaseDoc;\r\n}());\r\nexports.BaseDoc = BaseDoc;\r\nvar BaseInfo = (function () {\r\n    function BaseInfo() {\r\n    }\r\n    return BaseInfo;\r\n}());\r\nexports.BaseInfo = BaseInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/BaseInfo.ts\n// module id = 10\n// module chunks = 0","module.exports = require(\"process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"process\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}