{"version":3,"sources":["webpack:///webpack/bootstrap 58145e344a8118c4aa7c","webpack:///./src/WebServer.ts","webpack:///./src/router/AdminRouter.ts","webpack:///./src/Env.ts","webpack:///external \"path\"","webpack:///./src/router/PanelRouter.ts","webpack:///./src/view/const.ts","webpack:///./src/model/RkbModel.ts","webpack:///./src/view/Command.ts","webpack:///./src/model/GameRkbInfo.ts","webpack:///./src/model/PlayerInfo.ts","webpack:///./src/model/BaseInfo.ts","webpack:///external \"fs\"","webpack:///external \"os\"","webpack:///external \"process\"","webpack:///external \"http\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,iCAAiC;AACxE,kCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAiE,iBAAiB,6BAA6B;AAC/G;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C;AAC3C;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD,+CAA8C,cAAc;AAC5D;AACA;;;;;;;ACjGA;AACA;AACA;AACA,0BAAyB,0DAA0D;AACnF,EAAC;AACD;AACA;AACA;AACA,EAAC;;;;;;;ACRD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;;;;;;;ACPtB,kC;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,sGAAsG;AAC/H,EAAC;AACD;AACA;AACA,iCAAgC,sGAAsG;AACtI,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACvDD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,8EAA6E,0DAA0D;AACvI,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAsF,sCAAsC;AAC5H;AACA;AACA;AACA,wFAAuF,wCAAwC;AAC/H;AACA;AACA;AACA,uFAAsF,sCAAsC;AAC5H;AACA;AACA;AACA,wFAAuF,wCAAwC;AAC/H;AACA;AACA;AACA,oFAAmF,4CAA4C;AAC/H;AACA;AACA;AACA,uFAAsF,uBAAuB;AAC7G;AACA;AACA;AACA,uFAAsF,uBAAuB;AAC7G;AACA;AACA;AACA,sFAAqF,qBAAqB;AAC1G;AACA;AACA;AACA,sFAAqF,qBAAqB;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAuF,wCAAwC;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAmF,iDAAiD;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC1SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC,0BAA0B;AAC3B;AACA;AACA;AACA;;;;;;;AClKA;AACA;AACA;AACA;AACA;AACA,WAAU,oCAAoC;AAC9C,WAAU,oCAAoC;AAC9C,WAAU,oCAAoC;AAC9C,WAAU,oCAAoC;AAC9C,WAAU,sCAAsC;AAChD,WAAU,qCAAqC;AAC/C,WAAU,qCAAqC;AAC/C,WAAU,sCAAsC;AAChD,WAAU,sCAAsC;AAChD,YAAW,sCAAsC;AACjD,YAAW,sCAAsC;AACjD,YAAW,sCAAsC;AACjD,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,yBAAyB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,+BAA+B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC1KA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACtCA,gC;;;;;;ACAA,gC;;;;;;ACAA,qC;;;;;;ACAA,kC","file":"WebServer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 58145e344a8118c4aa7c","\"use strict\";\r\nvar AdminRouter_1 = require(\"./router/AdminRouter\");\r\nvar Env_1 = require(\"./Env\");\r\nvar PanelRouter_1 = require(\"./router/PanelRouter\");\r\nvar RkbModel_1 = require(\"./model/RkbModel\");\r\nvar fs1 = require('fs');\r\nvar path = require('path');\r\nvar os = require('os');\r\nvar WebServer = (function () {\r\n    function WebServer(callback) {\r\n        this.initEnv(callback);\r\n        this.test();\r\n    }\r\n    WebServer.prototype.test = function () {\r\n    };\r\n    WebServer.prototype.initEnv = function (callback) {\r\n        var _this = this;\r\n        var process = require(\"process\");\r\n        Env_1.ServerConf.isDev = process.defaultApp || /[\\\\/]electron-prebuilt[\\\\/]/.test(process.execPath);\r\n        console.log(process.execPath, Env_1.ServerConf.isDev);\r\n        var fs = require('fs');\r\n        fs.readFile('resources/app/package.json', function (err, data) {\r\n            if (err)\r\n                throw err;\r\n            var dataObj = JSON.parse(data);\r\n            Env_1.ServerConf.port = dataObj.server.port;\r\n            _this.initServer();\r\n            _this.serverConf = Env_1.ServerConf;\r\n            console.log(\"server config:\", Env_1.ServerConf);\r\n            if (callback)\r\n                callback(dataObj);\r\n        });\r\n    };\r\n    WebServer.prototype.initServer = function () {\r\n        var _this = this;\r\n        var app = express();\r\n        app.set('views', \"./resources/app/ejs\");\r\n        app.engine('ejs', ejs.renderFile);\r\n        app.set('view engine', 'ejs');\r\n        app.use(express.static(\"./resources/app/static\"));\r\n        app.use(bodyParser.urlencoded({ extended: false, limit: '55mb' }));\r\n        app.use(bodyParser.json({ limit: '50mb' }));\r\n        app.all(\"*\", function (req, res, next) {\r\n            var start = new Date().getTime();\r\n            res.header('Access-Control-Allow-Origin', '*');\r\n            res.header(\"Access-Control-Allow-Headers\", \"Content-Type,Content-Length, Authorization, Accept,X-Requested-With\");\r\n            res.header(\"Access-Control-Allow-Methods\", \"PUT,POST,GET,DELETE,OPTIONS\");\r\n            if (req.method == 'OPTIONS') {\r\n                res.send(200);\r\n            }\r\n            else {\r\n                next();\r\n                var ms = new Date().getTime() - start;\r\n                if (req.url.search('.png') > -1) {\r\n                }\r\n                else\r\n                    console.log('%c%s %s - %s ms', \"color: Green;font-weight:bold; background-color: LimeGreen;\", req.method, req.url, ms);\r\n            }\r\n        });\r\n        app.get('/', function (req, res) {\r\n            res.redirect('/admin');\r\n        });\r\n        app.get('/get', function (req, res) {\r\n            var url = req.query.url;\r\n            rest(url).then(function (response) {\r\n                res.send(response);\r\n            });\r\n        });\r\n        app.get('/proxy', function (req, res) {\r\n            var url = req.query.url;\r\n            var reqProxy = new XMLHttpRequest();\r\n            reqProxy.open('GET', url, true);\r\n            reqProxy.responseType = 'arraybuffer';\r\n            reqProxy.onload = function (e) {\r\n                var buf = new Buffer(new Uint8Array(reqProxy.response));\r\n                var data = \"data:image/png;base64,\" + buf.toString('base64');\r\n                res.send(data);\r\n            };\r\n            reqProxy.send();\r\n        });\r\n        app.use('/admin', AdminRouter_1.adminRouter);\r\n        app.use('/panel', PanelRouter_1.panelRouter);\r\n        var server = require('http').createServer(app);\r\n        server.listen(Env_1.ServerConf.port, function () {\r\n            _this.initSocketIO(server);\r\n            console.log(\"server on:\", Env_1.ServerConf.port);\r\n        });\r\n    };\r\n    WebServer.prototype.initSocketIO = function (server) {\r\n        var io = new SocketIO(server);\r\n        var rkbModel = new RkbModel_1.RkbModel(io);\r\n        PanelRouter_1.initIO(io);\r\n    };\r\n    return WebServer;\r\n}());\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = WebServer;\r\nexports.webServer = new WebServer();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/WebServer.ts\n// module id = 0\n// module chunks = 0","\"use strict\";\r\nexports.adminRouter = express.Router();\r\nexports.adminRouter.get('/', function (req, res) {\r\n    res.render('admin', { version: 0.5, opUrlArr: ['http://123', '21'].toString() });\r\n});\r\nexports.adminRouter.get('/sync/:gameId', function (req, res) {\r\n    var gameId = req.params.gameId;\r\n    res.send(\"同步面板时间 Game Id：\" + gameId);\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/router/AdminRouter.ts\n// module id = 1\n// module chunks = 0","\"use strict\";\r\nvar Node_path = require(\"path\");\r\nexports._path = function (path) {\r\n    if (!exports.ServerConf.isDev)\r\n        return Node_path.join('resources', path);\r\n    return path;\r\n};\r\nexports.ServerConf = { isDev: false, hupuWsUrl: '' };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Env.ts\n// module id = 2\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 3\n// module chunks = 0","\"use strict\";\r\nvar Env_1 = require(\"../Env\");\r\nvar const_1 = require(\"../view/const\");\r\nexports.panelRouter = express.Router();\r\nexports.panelRouter.get('/', function (req, res) {\r\n    console.log('get panel:');\r\n    res.render('panel', { host: Env_1.ServerConf.host, wsPort: Env_1.ServerConf.wsPort, hupuWsUrl: Env_1.ServerConf.hupuWsUrl });\r\n});\r\nexports.panelRouter.get('/screen', function (req, res) {\r\n    console.log('get screen:');\r\n    res.render('screen/index', { host: Env_1.ServerConf.host, wsPort: Env_1.ServerConf.wsPort, hupuWsUrl: Env_1.ServerConf.hupuWsUrl });\r\n});\r\nexports.panelRouter.get('/auto/bracket/:game_id', function (req, res) {\r\n    console.log('get /auto/bracket', req.params.game_id);\r\n    var game_id = req.params.game_id;\r\n    var api1 = 'http://api.liangle.com/api/passerbyking/game/top8Match/' + game_id;\r\n    rest(api1).then(function (response) {\r\n        res.send(JSON.parse(response.entity));\r\n    });\r\n});\r\nexports.panelRouter.get('/auto/player/:game_id', function (req, res) {\r\n    var game_id = req.params.game_id;\r\n    var api1 = 'http://api.liangle.com/api/passerbyking/game/players/' + game_id;\r\n    rest(api1).then(function (response) {\r\n        res.send(JSON.parse(response.entity));\r\n    });\r\n});\r\nvar onlineIO;\r\nexports.initIO = function (io) {\r\n    onlineIO = io.of(\"/\" + const_1.PanelId.rkbPanel);\r\n    onlineIO\r\n        .on(\"connect\", function (socket) {\r\n        console.log('onlineIO connect');\r\n    })\r\n        .on('disconnect', function (socket) {\r\n        console.log('onlineIO disconnect');\r\n    });\r\n};\r\nexports.panelRouter.post(\"/\" + const_1.PanelId.onlinePanel + \"/:cmdId\", function (req, res) {\r\n    if (!req.body)\r\n        return res.sendStatus(400);\r\n    var cmdId = req.params.cmdId;\r\n    var param = req.body;\r\n    console.log(\"/\" + const_1.PanelId.onlinePanel + \"/\" + cmdId, param);\r\n    var cmdMap = {};\r\n    if (param.hasOwnProperty(\"_\")) {\r\n        var autoCmdId = cmdId.replace(\"cs_\", \"sc_\");\r\n        onlineIO.emit(autoCmdId, param);\r\n        res.sendStatus(200);\r\n    }\r\n    else {\r\n        var isSend = cmdMap[cmdId](param);\r\n        if (!isSend)\r\n            res.sendStatus(200);\r\n    }\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/router/PanelRouter.ts\n// module id = 4\n// module chunks = 0","\"use strict\";\r\nexports.PanelId = {\r\n    stagePanel: 'stage',\r\n    stage1v1Panel: 'stage1v1',\r\n    rkbPanel: 'rkb',\r\n    bracketPanel: 'bracket',\r\n    rankPanel: 'rankPanel',\r\n    onlinePanel: 'online',\r\n    winPanel: 'win',\r\n    actPanel: 'act',\r\n    screenPanel: 'screen',\r\n    playerPanel: 'player'\r\n};\r\nexports.FontName = {\r\n    MicrosoftYahei: \"Microsoft Yahei\"\r\n};\r\nexports.ServerConst = {\r\n    SEND_ASYNC: true,\r\n    DEF_AVATAR: '/img/panel/stage1v1/blue.png'\r\n};\r\nexports.ViewConst = {\r\n    STAGE_WIDTH: 1920,\r\n    STAGE_HEIGHT: 1080\r\n};\r\nexports.TimerState = {\r\n    START_STR: 'start',\r\n    PAUSE_STR: 'pause',\r\n    PAUSE: 0,\r\n    RUNNING: 1\r\n};\r\nexports.ViewEvent = {\r\n    PLAYER_EDIT: 'edit player',\r\n    PLAYER_ADD: 'add player',\r\n    STRAIGHT3_LEFT: 'STRAIGHT3_LEFT',\r\n    STRAIGHT3_RIGHT: 'STRAIGHT3_RIGHT'\r\n};\r\nfunction ScParam(param) {\r\n    return param;\r\n}\r\nexports.ScParam = ScParam;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/const.ts\n// module id = 5\n// module chunks = 0","\"use strict\";\r\nvar const_1 = require(\"../view/const\");\r\nvar Command_1 = require(\"../view/Command\");\r\nvar Env_1 = require(\"../Env\");\r\nvar GameRkbInfo_1 = require(\"./GameRkbInfo\");\r\nvar PanelRouter_1 = require(\"../router/PanelRouter\");\r\nvar RkbModel = (function () {\r\n    function RkbModel(io) {\r\n        var _this = this;\r\n        this.panelWsMap = {};\r\n        this.gameInfo = new GameRkbInfo_1.GameRkbInfo();\r\n        io.on('connection', function () {\r\n        });\r\n        io = io.of(\"/\" + const_1.PanelId.rkbPanel);\r\n        io\r\n            .on(\"connect\", function (socket) {\r\n            console.log('connect');\r\n            socket.emit(\"\" + Command_1.CommandId.initPanel, const_1.ScParam({ gameInfo: _this.gameInfo, isDev: Env_1.ServerConf.isDev }));\r\n        })\r\n            .on('disconnect', function (socket) {\r\n            console.log('disconnect');\r\n        });\r\n        this.emit = function (cmd, param) {\r\n            io.emit(cmd, param);\r\n        };\r\n        this.initHupuAuto();\r\n        this.initOp();\r\n    }\r\n    RkbModel.prototype.initHupuAuto = function () {\r\n        rest('http://test.jrstvapi.hupu.com/zhubo/getNodeServer').then(function (response) {\r\n            var a = JSON.parse(response.entity);\r\n            if (a && a.length) {\r\n                Env_1.ServerConf.hupuWsUrl = a[0];\r\n            }\r\n        });\r\n    };\r\n    RkbModel.prototype.syncGame = function (gameId) {\r\n        var remoteIO;\r\n        if (!this.panelWsMap[gameId]) {\r\n            remoteIO = this.panelWsMap[gameId] = io.connect(Env_1.ServerConf.hupuWsUrl);\r\n            remoteIO.on('connect', function () {\r\n                console.log('hupuAuto socket connected');\r\n                remoteIO.emit('passerbyking', {\r\n                    game_id: gameId,\r\n                    page: 'score'\r\n                });\r\n            });\r\n            remoteIO.on('wall', function (data) {\r\n                var event = data.et;\r\n                var eventMap = {};\r\n                console.log('event:', event, data);\r\n            });\r\n        }\r\n        remoteIO = this.panelWsMap[gameId];\r\n        remoteIO.emit('passerbyking', {\r\n            game_id: gameId,\r\n            page: \"tsync\"\r\n        });\r\n    };\r\n    RkbModel.prototype.initOp = function () {\r\n        var _this = this;\r\n        PanelRouter_1.panelRouter.post(\"/rkb/:cmdId\", function (req, res) {\r\n            if (!req.body)\r\n                return res.sendStatus(400);\r\n            var cmdId = req.params.cmdId;\r\n            var param = req.body;\r\n            console.log(\"/rkb/\" + cmdId, param);\r\n            var cmdMap = {};\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_minLeftScore)] = function () {\r\n                _this.gameInfo.minLeftScore();\r\n                _this.emit(\"\" + Command_1.CommandId.updateLeftScore, const_1.ScParam({ leftScore: _this.gameInfo.leftScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_minRightScore)] = function () {\r\n                _this.gameInfo.minRightScore();\r\n                _this.emit(\"\" + Command_1.CommandId.updateRightScore, const_1.ScParam({ rightScore: _this.gameInfo.rightScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_addLeftScore)] = function () {\r\n                var straight = _this.gameInfo.addLeftScore();\r\n                _this.emit(\"\" + Command_1.CommandId.updateLeftScore, const_1.ScParam({ leftScore: _this.gameInfo.leftScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_addRightScore)] = function () {\r\n                var straight = _this.gameInfo.addRightScore();\r\n                _this.emit(\"\" + Command_1.CommandId.updateRightScore, const_1.ScParam({ rightScore: _this.gameInfo.rightScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_unLimitScore)] = function (param) {\r\n                _this.gameInfo.unLimitScore = param.unLimitScore;\r\n                _this.emit(\"\" + Command_1.CommandId.unLimitScore, const_1.ScParam({ unLimitScore: _this.gameInfo.unLimitScore }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_addRightFoul)] = function () {\r\n                var rightFoul = _this.gameInfo.addRightFoul();\r\n                _this.emit(\"\" + Command_1.CommandId.updateRightFoul, const_1.ScParam({ rightFoul: rightFoul }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_minRightFoul)] = function () {\r\n                var rightFoul = _this.gameInfo.minRightFoul();\r\n                _this.emit(\"\" + Command_1.CommandId.updateRightFoul, const_1.ScParam({ rightFoul: rightFoul }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_addLeftFoul)] = function () {\r\n                var leftFoul = _this.gameInfo.addLeftFoul();\r\n                _this.emit(\"\" + Command_1.CommandId.updateLeftFoul, const_1.ScParam({ leftFoul: leftFoul }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_minLeftFoul)] = function () {\r\n                var leftFoul = _this.gameInfo.minLeftFoul();\r\n                _this.emit(\"\" + Command_1.CommandId.updateLeftFoul, const_1.ScParam({ leftFoul: leftFoul }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_resetGame)] = function (param) {\r\n                return _this.cs_resetGame(param, cmdMap);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_toggleTimer)] = function (param) {\r\n                if (param) {\r\n                    _this.gameInfo.toggleTimer(param.state);\r\n                    _this.emit(\"\" + Command_1.CommandId.toggleTimer, const_1.ScParam(param));\r\n                }\r\n                else {\r\n                    _this.gameInfo.toggleTimer();\r\n                    _this.emit(\"\" + Command_1.CommandId.toggleTimer);\r\n                }\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_resetTimer)] = function () {\r\n                _this.gameInfo.resetTimer();\r\n                _this.emit(\"\" + Command_1.CommandId.resetTimer);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayer)] = function (param) {\r\n                return _this.cs_updatePlayer(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayerAll)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updateKingPlayer)] = function (param) {\r\n                _this.gameInfo.kingPlayer = param.kingPlayer;\r\n                _this.emit(\"\" + Command_1.CommandId.updateKingPlayer, const_1.ScParam({ kingPlayer: _this.gameInfo.kingPlayer }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayerState)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setActPlayer)] = function (param) {\r\n                return _this.cs_setActPlayer(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setGameIdx)] = function (param) {\r\n                _this.gameInfo.gameIdx = param.gameIdx;\r\n                _this.emit(\"\" + Command_1.CommandId.setGameIdx, const_1.ScParam(param));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInActivityPanel)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeOutActivityPanel)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.fadeOutActivityPanel);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayerBackNum)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.updatePlayerBackNum, const_1.ScParam(param));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_startingLine)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.startingLine, const_1.ScParam({ playerDocArr: _this.gameInfo.getPlayerDocArr() }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_hideStartingLine)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.hideStartingLine);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInCountDown)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.fadeInCountDown, param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeOutCountDown)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.fadeOutCountDown);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInWinPanel)] = function (param) {\r\n                var isBlueWin = _this.gameInfo.leftScore > _this.gameInfo.rightScore;\r\n                var playerDoc;\r\n                if (isBlueWin)\r\n                    playerDoc = _this.gameInfo.getPlayerDocArr()[0];\r\n                else\r\n                    playerDoc = _this.gameInfo.getPlayerDocArr()[1];\r\n                if (playerDoc.id == Env_1.ServerConf.king) {\r\n                    playerDoc.isKing = true;\r\n                }\r\n                _this.emit(\"\" + Command_1.CommandId.fadeInWinPanel, const_1.ScParam({\r\n                    isBlue: isBlueWin,\r\n                    playerDoc: playerDoc\r\n                }));\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeOutWinPanel)] = function (param) {\r\n                _this.emit(\"\" + Command_1.CommandId.fadeOutWinPanel);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_getBracketPlayerByIdx)] = function (param) {\r\n                var actDoc = _this.getActDoc();\r\n                var bracketIdx = param.bracketIdx;\r\n                var bracketDoc = actDoc.bracket[bracketIdx];\r\n                console.log('bracketDoc', bracketDoc);\r\n                if (bracketDoc) {\r\n                    cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayer)]({\r\n                        idx: 0,\r\n                        playerId: bracketDoc.gameInfoArr[0].id\r\n                    });\r\n                    cmdMap[(\"\" + Command_1.CommandId.cs_updatePlayer)]({\r\n                        idx: 1,\r\n                        playerId: bracketDoc.gameInfoArr[1].id\r\n                    });\r\n                }\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setBracketPlayer)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_refreshClient)] = function (param) {\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_changeColor)] = function (param) {\r\n                return _this.cs_changeColor(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_clearActPlayerGameRec)] = function (param) {\r\n                return _this.cs_clearActPlayerGameRec(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_updateWinScore)] = function (param) {\r\n                return _this.cs_updateWinScore(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_saveGameRec)] = function (param) {\r\n                return _this.cs_saveGameRec(param, res);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setCursorPlayer)] = function (param) {\r\n                return _this.cs_setCursorPlayer(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_saveToTotalScore)] = function (param) {\r\n                return _this.cs_saveToTotalScore(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInPlayerRank)] = function (param) {\r\n                return _this.cs_fadeInPlayerRank(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInFtRank)] = function (param) {\r\n                return _this.cs_fadeInFtRank(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInFTShow)] = function (param) {\r\n                return _this.cs_fadeInFTShow(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeOutFTShow)] = function (param) {\r\n                return _this.cs_fadeOutFTShow(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_fadeInMixRank)] = function (param) {\r\n                return _this.cs_fadeInMixRank(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_setScorePanelVisible)] = function (param) {\r\n                return _this.cs_setScorePanelVisible(param);\r\n            };\r\n            cmdMap[(\"\" + Command_1.CommandId.cs_autoSaveGameRec)] = function (param) {\r\n                return _this.cs_autoSaveGameRec(param);\r\n            };\r\n            if (param.hasOwnProperty(\"_\")) {\r\n                var autoCmdId = cmdId.replace(\"cs_\", \"\");\r\n                _this.emit(autoCmdId, param);\r\n                res.sendStatus(200);\r\n            }\r\n            else {\r\n                var isSend = cmdMap[cmdId](param);\r\n                if (!isSend)\r\n                    res.sendStatus(200);\r\n            }\r\n        });\r\n    };\r\n    RkbModel.prototype.cs_autoSaveGameRec = function (param) {\r\n        this.emit(\"\" + Command_1.CommandId.setScorePanelVisible, const_1.ScParam(param));\r\n    };\r\n    RkbModel.prototype.cs_setScorePanelVisible = function (param) {\r\n        this.emit(\"\" + Command_1.CommandId.setScorePanelVisible, const_1.ScParam(param));\r\n    };\r\n    RkbModel.prototype.cs_updatePlayer = function (param) {\r\n    };\r\n    RkbModel.prototype.getFlyPlayerDoc = function (id) {\r\n    };\r\n    RkbModel.prototype.cs_clearActPlayerGameRec = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_saveToTotalScore = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_setCursorPlayer = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_changeColor = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_resetGame = function (param, cmdMap) {\r\n    };\r\n    RkbModel.prototype.cs_saveGameRec = function (param, res) {\r\n    };\r\n    RkbModel.prototype.cs_updateWinScore = function (param) {\r\n        console.log('cs_updateWinScore', param);\r\n        this.gameInfo.winScore = param.winScore;\r\n        this.emit(\"\" + Command_1.CommandId.updateWinScore, const_1.ScParam(param));\r\n    };\r\n    RkbModel.prototype.cs_setActPlayer = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_fadeInFTShow = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_fadeOutFTShow = function (param) {\r\n        this.emit(\"\" + Command_1.CommandId.fadeOutFTShow, param);\r\n    };\r\n    RkbModel.prototype.cs_fadeInFtRank = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_fadeInMixRank = function (param) {\r\n    };\r\n    RkbModel.prototype.cs_fadeInPlayerRank = function (param) {\r\n    };\r\n    RkbModel.prototype.startGame = function (gameId) {\r\n    };\r\n    RkbModel.prototype.refreshBracket = function (actDoc) {\r\n    };\r\n    RkbModel.prototype.getActDoc = function () {\r\n    };\r\n    RkbModel.prototype.quePlayer = function (playerId, isout) {\r\n    };\r\n    return RkbModel;\r\n}());\r\nexports.RkbModel = RkbModel;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/RkbModel.ts\n// module id = 6\n// module chunks = 0","\"use strict\";\r\nvar cmdEnum;\r\n(function (cmdEnum) {\r\n    cmdEnum[cmdEnum[\"dmkPush\"] = 0] = \"dmkPush\";\r\n    cmdEnum[cmdEnum[\"toggleTracker\"] = 1] = \"toggleTracker\";\r\n    cmdEnum[cmdEnum[\"toggleBallRolling\"] = 2] = \"toggleBallRolling\";\r\n    cmdEnum[cmdEnum[\"toggleTimer\"] = 3] = \"toggleTimer\";\r\n    cmdEnum[cmdEnum[\"cs_toggleTimer\"] = 4] = \"cs_toggleTimer\";\r\n    cmdEnum[cmdEnum[\"resetTimer\"] = 5] = \"resetTimer\";\r\n    cmdEnum[cmdEnum[\"disableTracker\"] = 6] = \"disableTracker\";\r\n    cmdEnum[cmdEnum[\"updateLeftScore\"] = 7] = \"updateLeftScore\";\r\n    cmdEnum[cmdEnum[\"cs_addLeftScore\"] = 8] = \"cs_addLeftScore\";\r\n    cmdEnum[cmdEnum[\"updateRightScore\"] = 9] = \"updateRightScore\";\r\n    cmdEnum[cmdEnum[\"cs_addRightScore\"] = 10] = \"cs_addRightScore\";\r\n    cmdEnum[cmdEnum[\"updateLeftBall\"] = 11] = \"updateLeftBall\";\r\n    cmdEnum[cmdEnum[\"updateRightBall\"] = 12] = \"updateRightBall\";\r\n    cmdEnum[cmdEnum[\"cs_addLeftBall\"] = 13] = \"cs_addLeftBall\";\r\n    cmdEnum[cmdEnum[\"cs_addRightBall\"] = 14] = \"cs_addRightBall\";\r\n    cmdEnum[cmdEnum[\"cs_minLeftBall\"] = 15] = \"cs_minLeftBall\";\r\n    cmdEnum[cmdEnum[\"cs_minRightBall\"] = 16] = \"cs_minRightBall\";\r\n    cmdEnum[cmdEnum[\"cs_updateInitBallCount\"] = 17] = \"cs_updateInitBallCount\";\r\n    cmdEnum[cmdEnum[\"minLeftScore\"] = 18] = \"minLeftScore\";\r\n    cmdEnum[cmdEnum[\"cs_minLeftScore\"] = 19] = \"cs_minLeftScore\";\r\n    cmdEnum[cmdEnum[\"minRightScore\"] = 20] = \"minRightScore\";\r\n    cmdEnum[cmdEnum[\"cs_minRightScore\"] = 21] = \"cs_minRightScore\";\r\n    cmdEnum[cmdEnum[\"updateLeftFoul\"] = 22] = \"updateLeftFoul\";\r\n    cmdEnum[cmdEnum[\"cs_addLeftFoul\"] = 23] = \"cs_addLeftFoul\";\r\n    cmdEnum[cmdEnum[\"cs_minLeftFoul\"] = 24] = \"cs_minLeftFoul\";\r\n    cmdEnum[cmdEnum[\"updateRightFoul\"] = 25] = \"updateRightFoul\";\r\n    cmdEnum[cmdEnum[\"cs_addRightFoul\"] = 26] = \"cs_addRightFoul\";\r\n    cmdEnum[cmdEnum[\"cs_minRightFoul\"] = 27] = \"cs_minRightFoul\";\r\n    cmdEnum[cmdEnum[\"cs_updateLeftSkill\"] = 28] = \"cs_updateLeftSkill\";\r\n    cmdEnum[cmdEnum[\"updateLeftSkill\"] = 29] = \"updateLeftSkill\";\r\n    cmdEnum[cmdEnum[\"cs_updateRightSkill\"] = 30] = \"cs_updateRightSkill\";\r\n    cmdEnum[cmdEnum[\"updateRightSkill\"] = 31] = \"updateRightSkill\";\r\n    cmdEnum[cmdEnum[\"stageFadeOut\"] = 32] = \"stageFadeOut\";\r\n    cmdEnum[cmdEnum[\"cs_fadeOut\"] = 33] = \"cs_fadeOut\";\r\n    cmdEnum[cmdEnum[\"playerScore\"] = 34] = \"playerScore\";\r\n    cmdEnum[cmdEnum[\"cs_playerScore\"] = 35] = \"cs_playerScore\";\r\n    cmdEnum[cmdEnum[\"stageFadeIn\"] = 36] = \"stageFadeIn\";\r\n    cmdEnum[cmdEnum[\"cs_stageFadeIn\"] = 37] = \"cs_stageFadeIn\";\r\n    cmdEnum[cmdEnum[\"moveStagePanel\"] = 38] = \"moveStagePanel\";\r\n    cmdEnum[cmdEnum[\"cs_moveStagePanel\"] = 39] = \"cs_moveStagePanel\";\r\n    cmdEnum[cmdEnum[\"updatePlayer\"] = 40] = \"updatePlayer\";\r\n    cmdEnum[cmdEnum[\"cs_updatePlayer\"] = 41] = \"cs_updatePlayer\";\r\n    cmdEnum[cmdEnum[\"updatePlayerAll\"] = 42] = \"updatePlayerAll\";\r\n    cmdEnum[cmdEnum[\"cs_changeColor\"] = 43] = \"cs_changeColor\";\r\n    cmdEnum[cmdEnum[\"cs_updatePlayerAll\"] = 44] = \"cs_updatePlayerAll\";\r\n    cmdEnum[cmdEnum[\"cs_updatePlayerBackNum\"] = 45] = \"cs_updatePlayerBackNum\";\r\n    cmdEnum[cmdEnum[\"updatePlayerBackNum\"] = 46] = \"updatePlayerBackNum\";\r\n    cmdEnum[cmdEnum[\"fadeInNotice\"] = 47] = \"fadeInNotice\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInNotice\"] = 48] = \"cs_fadeInNotice\";\r\n    cmdEnum[cmdEnum[\"cs_resetGame\"] = 49] = \"cs_resetGame\";\r\n    cmdEnum[cmdEnum[\"cs_toggleDmk\"] = 50] = \"cs_toggleDmk\";\r\n    cmdEnum[cmdEnum[\"toggleDmk\"] = 51] = \"toggleDmk\";\r\n    cmdEnum[cmdEnum[\"resetGame\"] = 52] = \"resetGame\";\r\n    cmdEnum[cmdEnum[\"cs_unLimitScore\"] = 53] = \"cs_unLimitScore\";\r\n    cmdEnum[cmdEnum[\"unLimitScore\"] = 54] = \"unLimitScore\";\r\n    cmdEnum[cmdEnum[\"cs_updatePlayerState\"] = 55] = \"cs_updatePlayerState\";\r\n    cmdEnum[cmdEnum[\"updatePlayerState\"] = 56] = \"updatePlayerState\";\r\n    cmdEnum[cmdEnum[\"cs_setGameIdx\"] = 57] = \"cs_setGameIdx\";\r\n    cmdEnum[cmdEnum[\"setGameIdx\"] = 58] = \"setGameIdx\";\r\n    cmdEnum[cmdEnum[\"fadeInWinPanel\"] = 59] = \"fadeInWinPanel\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInWinPanel\"] = 60] = \"cs_fadeInWinPanel\";\r\n    cmdEnum[cmdEnum[\"fadeOutWinPanel\"] = 61] = \"fadeOutWinPanel\";\r\n    cmdEnum[cmdEnum[\"cs_fadeOutWinPanel\"] = 62] = \"cs_fadeOutWinPanel\";\r\n    cmdEnum[cmdEnum[\"saveGameRec\"] = 63] = \"saveGameRec\";\r\n    cmdEnum[cmdEnum[\"cs_saveGameRec\"] = 64] = \"cs_saveGameRec\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInFinalPlayer\"] = 65] = \"cs_fadeInFinalPlayer\";\r\n    cmdEnum[cmdEnum[\"fadeInFinalPlayer\"] = 66] = \"fadeInFinalPlayer\";\r\n    cmdEnum[cmdEnum[\"cs_fadeOutFinalPlayer\"] = 67] = \"cs_fadeOutFinalPlayer\";\r\n    cmdEnum[cmdEnum[\"fadeOutFinalPlayer\"] = 68] = \"fadeOutFinalPlayer\";\r\n    cmdEnum[cmdEnum[\"cs_setActPlayer\"] = 69] = \"cs_setActPlayer\";\r\n    cmdEnum[cmdEnum[\"cs_setBracketPlayer\"] = 70] = \"cs_setBracketPlayer\";\r\n    cmdEnum[cmdEnum[\"cs_clearActPlayerGameRec\"] = 71] = \"cs_clearActPlayerGameRec\";\r\n    cmdEnum[cmdEnum[\"cs_getBracketPlayerByIdx\"] = 72] = \"cs_getBracketPlayerByIdx\";\r\n    cmdEnum[cmdEnum[\"cs_refreshClient\"] = 73] = \"cs_refreshClient\";\r\n    cmdEnum[cmdEnum[\"refreshClient\"] = 74] = \"refreshClient\";\r\n    cmdEnum[cmdEnum[\"cs_updateWinScore\"] = 75] = \"cs_updateWinScore\";\r\n    cmdEnum[cmdEnum[\"updateWinScore\"] = 76] = \"updateWinScore\";\r\n    cmdEnum[cmdEnum[\"cs_updateKingPlayer\"] = 77] = \"cs_updateKingPlayer\";\r\n    cmdEnum[cmdEnum[\"updateKingPlayer\"] = 78] = \"updateKingPlayer\";\r\n    cmdEnum[cmdEnum[\"cs_setCursorPlayer\"] = 79] = \"cs_setCursorPlayer\";\r\n    cmdEnum[cmdEnum[\"setCursorPlayer\"] = 80] = \"setCursorPlayer\";\r\n    cmdEnum[cmdEnum[\"cs_saveToTotalScore\"] = 81] = \"cs_saveToTotalScore\";\r\n    cmdEnum[cmdEnum[\"cs_setScorePanelVisible\"] = 82] = \"cs_setScorePanelVisible\";\r\n    cmdEnum[cmdEnum[\"setScorePanelVisible\"] = 83] = \"setScorePanelVisible\";\r\n    cmdEnum[cmdEnum[\"cs_autoSaveGameRec\"] = 84] = \"cs_autoSaveGameRec\";\r\n    cmdEnum[cmdEnum[\"cs_setDelayTime\"] = 85] = \"cs_setDelayTime\";\r\n    cmdEnum[cmdEnum[\"sc_setDelayTime\"] = 86] = \"sc_setDelayTime\";\r\n    cmdEnum[cmdEnum[\"cs_showRank\"] = 87] = \"cs_showRank\";\r\n    cmdEnum[cmdEnum[\"sc_showRank\"] = 88] = \"sc_showRank\";\r\n    cmdEnum[cmdEnum[\"cs_showBracket\"] = 89] = \"cs_showBracket\";\r\n    cmdEnum[cmdEnum[\"sc_showBracket\"] = 90] = \"sc_showBracket\";\r\n    cmdEnum[cmdEnum[\"cs_hideOnlinePanel\"] = 91] = \"cs_hideOnlinePanel\";\r\n    cmdEnum[cmdEnum[\"sc_hideOnlinePanel\"] = 92] = \"sc_hideOnlinePanel\";\r\n    cmdEnum[cmdEnum[\"cs_resetTimer\"] = 93] = \"cs_resetTimer\";\r\n    cmdEnum[cmdEnum[\"sc_resetTimer\"] = 94] = \"sc_resetTimer\";\r\n    cmdEnum[cmdEnum[\"cs_startTimer\"] = 95] = \"cs_startTimer\";\r\n    cmdEnum[cmdEnum[\"sc_startTimer\"] = 96] = \"sc_startTimer\";\r\n    cmdEnum[cmdEnum[\"cs_pauseTimer\"] = 97] = \"cs_pauseTimer\";\r\n    cmdEnum[cmdEnum[\"sc_pauseTimer\"] = 98] = \"sc_pauseTimer\";\r\n    cmdEnum[cmdEnum[\"cs_startingLine\"] = 99] = \"cs_startingLine\";\r\n    cmdEnum[cmdEnum[\"startingLine\"] = 100] = \"startingLine\";\r\n    cmdEnum[cmdEnum[\"cs_hideStartingLine\"] = 101] = \"cs_hideStartingLine\";\r\n    cmdEnum[cmdEnum[\"hideStartingLine\"] = 102] = \"hideStartingLine\";\r\n    cmdEnum[cmdEnum[\"cs_queryPlayerByPos\"] = 103] = \"cs_queryPlayerByPos\";\r\n    cmdEnum[cmdEnum[\"fadeInPlayerPanel\"] = 104] = \"fadeInPlayerPanel\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInPlayerPanel\"] = 105] = \"cs_fadeInPlayerPanel\";\r\n    cmdEnum[cmdEnum[\"fadeOutPlayerPanel\"] = 106] = \"fadeOutPlayerPanel\";\r\n    cmdEnum[cmdEnum[\"cs_fadeOutPlayerPanel\"] = 107] = \"cs_fadeOutPlayerPanel\";\r\n    cmdEnum[cmdEnum[\"movePlayerPanel\"] = 108] = \"movePlayerPanel\";\r\n    cmdEnum[cmdEnum[\"cs_movePlayerPanel\"] = 109] = \"cs_movePlayerPanel\";\r\n    cmdEnum[cmdEnum[\"straightScore3\"] = 110] = \"straightScore3\";\r\n    cmdEnum[cmdEnum[\"straightScore5\"] = 111] = \"straightScore5\";\r\n    cmdEnum[cmdEnum[\"initPanel\"] = 112] = \"initPanel\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInActivityPanel\"] = 113] = \"cs_fadeInActivityPanel\";\r\n    cmdEnum[cmdEnum[\"fadeInActivityPanel\"] = 114] = \"fadeInActivityPanel\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInNextActivity\"] = 115] = \"cs_fadeInNextActivity\";\r\n    cmdEnum[cmdEnum[\"fadeInNextActivity\"] = 116] = \"fadeInNextActivity\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInActivityExGame\"] = 117] = \"cs_fadeInActivityExGame\";\r\n    cmdEnum[cmdEnum[\"fadeInActivityExGame\"] = 118] = \"fadeInActivityExGame\";\r\n    cmdEnum[cmdEnum[\"cs_fadeOutActivityPanel\"] = 119] = \"cs_fadeOutActivityPanel\";\r\n    cmdEnum[cmdEnum[\"fadeOutActivityPanel\"] = 120] = \"fadeOutActivityPanel\";\r\n    cmdEnum[cmdEnum[\"cs_startGame\"] = 121] = \"cs_startGame\";\r\n    cmdEnum[cmdEnum[\"cs_restartGame\"] = 122] = \"cs_restartGame\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInRankPanel\"] = 123] = \"cs_fadeInRankPanel\";\r\n    cmdEnum[cmdEnum[\"fadeInRankPanel\"] = 124] = \"fadeInRankPanel\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInNextRank\"] = 125] = \"cs_fadeInNextRank\";\r\n    cmdEnum[cmdEnum[\"fadeInNextRank\"] = 126] = \"fadeInNextRank\";\r\n    cmdEnum[cmdEnum[\"cs_setGameComing\"] = 127] = \"cs_setGameComing\";\r\n    cmdEnum[cmdEnum[\"setGameComing\"] = 128] = \"setGameComing\";\r\n    cmdEnum[cmdEnum[\"cs_fadeOutRankPanel\"] = 129] = \"cs_fadeOutRankPanel\";\r\n    cmdEnum[cmdEnum[\"fadeOutRankPanel\"] = 130] = \"fadeOutRankPanel\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInCountDown\"] = 131] = \"cs_fadeInCountDown\";\r\n    cmdEnum[cmdEnum[\"fadeInCountDown\"] = 132] = \"fadeInCountDown\";\r\n    cmdEnum[cmdEnum[\"cs_fadeOutCountDown\"] = 133] = \"cs_fadeOutCountDown\";\r\n    cmdEnum[cmdEnum[\"fadeOutCountDown\"] = 134] = \"fadeOutCountDown\";\r\n    cmdEnum[cmdEnum[\"cs_inScreenScore\"] = 135] = \"cs_inScreenScore\";\r\n    cmdEnum[cmdEnum[\"inScreenScore\"] = 136] = \"inScreenScore\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInFTShow\"] = 137] = \"cs_fadeInFTShow\";\r\n    cmdEnum[cmdEnum[\"fadeInFTShow\"] = 138] = \"fadeInFTShow\";\r\n    cmdEnum[cmdEnum[\"cs_fadeOutFTShow\"] = 139] = \"cs_fadeOutFTShow\";\r\n    cmdEnum[cmdEnum[\"fadeOutFTShow\"] = 140] = \"fadeOutFTShow\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInPlayerRank\"] = 141] = \"cs_fadeInPlayerRank\";\r\n    cmdEnum[cmdEnum[\"fadeInPlayerRank\"] = 142] = \"fadeInPlayerRank\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInFtRank\"] = 143] = \"cs_fadeInFtRank\";\r\n    cmdEnum[cmdEnum[\"fadeInFtRank\"] = 144] = \"fadeInFtRank\";\r\n    cmdEnum[cmdEnum[\"cs_fadeInMixRank\"] = 145] = \"cs_fadeInMixRank\";\r\n    cmdEnum[cmdEnum[\"fadeInMixRank\"] = 146] = \"fadeInMixRank\";\r\n    cmdEnum[cmdEnum[\"cs_findPlayerData\"] = 147] = \"cs_findPlayerData\";\r\n    cmdEnum[cmdEnum[\"cs_attack\"] = 148] = \"cs_attack\";\r\n    cmdEnum[cmdEnum[\"attack\"] = 149] = \"attack\";\r\n    cmdEnum[cmdEnum[\"cs_addHealth\"] = 150] = \"cs_addHealth\";\r\n    cmdEnum[cmdEnum[\"addHealth\"] = 151] = \"addHealth\";\r\n    cmdEnum[cmdEnum[\"fadeInOK\"] = 152] = \"fadeInOK\";\r\n    cmdEnum[cmdEnum[\"cs_combo\"] = 153] = \"cs_combo\";\r\n    cmdEnum[cmdEnum[\"combo\"] = 154] = \"combo\";\r\n})(cmdEnum || (cmdEnum = {}));\r\nexports.CommandId = {};\r\nfor (var k in cmdEnum) {\r\n    exports.CommandId[k] = k;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/Command.ts\n// module id = 7\n// module chunks = 0","\"use strict\";\r\nvar PlayerInfo_1 = require(\"./PlayerInfo\");\r\nvar BaseInfo_1 = require(\"./BaseInfo\");\r\nvar const_1 = require(\"../view/const\");\r\nexports.bracketMap = {\r\n    \"1\": { 'loser': [5, 0], 'winner': [7, 0] },\r\n    \"2\": { 'loser': [5, 1], 'winner': [7, 1] },\r\n    \"3\": { 'loser': [6, 0], 'winner': [8, 0] },\r\n    \"4\": { 'loser': [6, 1], 'winner': [8, 1] },\r\n    \"5\": { 'loser': [-1, 0], 'winner': [10, 1] },\r\n    \"6\": { 'loser': [-1, 0], 'winner': [9, 1] },\r\n    \"7\": { 'loser': [9, 0], 'winner': [11, 0] },\r\n    \"8\": { 'loser': [10, 0], 'winner': [11, 1] },\r\n    \"9\": { 'loser': [-1, 0], 'winner': [12, 1] },\r\n    \"10\": { 'loser': [-1, 0], 'winner': [12, 0] },\r\n    \"11\": { 'loser': [13, 0], 'winner': [14, 0] },\r\n    \"12\": { 'loser': [-1, 0], 'winner': [13, 1] },\r\n    \"13\": { 'loser': [-1, 0], 'winner': [14, 1] }\r\n};\r\nvar GameRkbInfo = (function () {\r\n    function GameRkbInfo(gameDoc) {\r\n        this.leftFoul = 0;\r\n        this.rightFoul = 0;\r\n        this.playerInfoArr = new Array(2);\r\n        this.gameIdx = 0;\r\n        this.winScore = 2;\r\n        this.gameState = 0;\r\n        this.kingPlayer = 0;\r\n        this._timer = null;\r\n        this.timerState = 0;\r\n        this.time = 0;\r\n        this.rightScore = 0;\r\n        this.leftScore = 0;\r\n        this._startDate = new Date().getTime();\r\n        if (gameDoc) {\r\n            BaseInfo_1.setPropTo(gameDoc, this);\r\n            var playerDocArr = this.playerInfoArr;\r\n            this.playerInfoArr = [];\r\n            for (var i = 0; i < playerDocArr.length; i++) {\r\n                this.playerInfoArr.push(new PlayerInfo_1.PlayerInfo(playerDocArr[i]));\r\n            }\r\n        }\r\n    }\r\n    GameRkbInfo.prototype.addLeftScore = function () {\r\n        if (this.unLimitScore === 1)\r\n            this.leftScore += 1;\r\n        else\r\n            this.leftScore = (this.leftScore + 1) % (this.winScore + 1);\r\n    };\r\n    GameRkbInfo.prototype.addRightScore = function () {\r\n        if (this.unLimitScore === 1)\r\n            this.rightScore += 1;\r\n        else\r\n            this.rightScore = (this.rightScore + 1) % (this.winScore + 1);\r\n    };\r\n    GameRkbInfo.prototype.minRightScore = function () {\r\n        this.rightScore = (this.rightScore - 1) % (this.winScore + 1);\r\n    };\r\n    GameRkbInfo.prototype.minLeftScore = function () {\r\n        this.leftScore = (this.leftScore - 1) % (this.winScore + 1);\r\n    };\r\n    GameRkbInfo.prototype.setPlayerInfoByIdx = function (pos, playerInfo) {\r\n        this.playerInfoArr[pos] = playerInfo;\r\n        return playerInfo;\r\n    };\r\n    GameRkbInfo.prototype.saveGameResult = function () {\r\n        if (this.gameState === 0) {\r\n            var isBlueWin = this.leftScore > this.rightScore;\r\n            var bluePlayerDoc = this.playerInfoArr[0].playerData;\r\n            var redPlayerDoc = this.playerInfoArr[1].playerData;\r\n            bluePlayerDoc.ftScore ? bluePlayerDoc.ftScore += this.leftScore : bluePlayerDoc.ftScore = this.leftScore;\r\n            bluePlayerDoc.curFtScore ? bluePlayerDoc.curFtScore += this.leftScore : bluePlayerDoc.curFtScore = this.leftScore;\r\n            bluePlayerDoc.dtScore = this.leftScore;\r\n            redPlayerDoc.ftScore ? redPlayerDoc.ftScore += this.rightScore : redPlayerDoc.ftScore = this.rightScore;\r\n            redPlayerDoc.curFtScore ? redPlayerDoc.curFtScore += this.rightScore : redPlayerDoc.curFtScore = this.rightScore;\r\n            redPlayerDoc.dtScore = this.rightScore;\r\n            if (isBlueWin) {\r\n                this.loserPlayerInfo = this.playerInfoArr[1];\r\n                this.loserPlayerInfo.isBlue = false;\r\n                this.winner_Idx = [this.playerInfoArr[0].playerData.id, 0];\r\n                this.loser_Idx = [this.playerInfoArr[1].playerData.id, 1];\r\n                PlayerInfo_1.PlayerInfo.addWinGameAmount(this.playerInfoArr[0].playerData);\r\n                PlayerInfo_1.PlayerInfo.addLoseGameAmount(this.playerInfoArr[1].playerData);\r\n            }\r\n            else {\r\n                this.winner_Idx = [this.playerInfoArr[1].playerData.id, 1];\r\n                this.loser_Idx = [this.playerInfoArr[0].playerData.id, 0];\r\n                this.loserPlayerInfo = this.playerInfoArr[0];\r\n                this.loserPlayerInfo.isBlue = true;\r\n                PlayerInfo_1.PlayerInfo.addLoseGameAmount(this.playerInfoArr[0].playerData);\r\n                PlayerInfo_1.PlayerInfo.addWinGameAmount(this.playerInfoArr[1].playerData);\r\n            }\r\n            this.gameState = 1;\r\n        }\r\n    };\r\n    Object.defineProperty(GameRkbInfo.prototype, \"isFinish\", {\r\n        get: function () {\r\n            return this.gameState != 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GameRkbInfo.prototype.getGameDoc = function () {\r\n        var g = {};\r\n        var date = new Date();\r\n        g.time = this.time;\r\n        var winner = this.playerInfoArr[this.winner_Idx[1]].playerData;\r\n        var loser = this.playerInfoArr[this.loser_Idx[1]].playerData;\r\n        g.idx = this.gameIdx;\r\n        g.start = this._startDate;\r\n        g.end = date.getTime();\r\n        var gameDoc = function (playerDoc) {\r\n            return { name: playerDoc.name, _id: playerDoc._id, score: playerDoc.dtScore };\r\n        };\r\n        g.blueFoul = this.leftFoul;\r\n        g.redFoul = this.rightFoul;\r\n        g.winner = gameDoc(winner);\r\n        g.loser = gameDoc(loser);\r\n        console.log('getGameDoc', g);\r\n        return g;\r\n    };\r\n    GameRkbInfo.prototype.getPlayerDocArr = function () {\r\n        var a = [];\r\n        for (var i = 0; i < this.playerInfoArr.length; i++) {\r\n            a.push(this.playerInfoArr[i].playerData);\r\n        }\r\n        return a;\r\n    };\r\n    GameRkbInfo.prototype.toggleTimer = function (state) {\r\n        var _this = this;\r\n        if (state) {\r\n            if (state === const_1.TimerState.PAUSE) {\r\n                this.resetTimer();\r\n            }\r\n        }\r\n        else {\r\n            if (this._timer) {\r\n                this.resetTimer();\r\n            }\r\n            else {\r\n                this._timer = setInterval(function () {\r\n                    _this.time++;\r\n                }, 1000);\r\n                this.timerState = 1;\r\n            }\r\n        }\r\n    };\r\n    GameRkbInfo.prototype.resetTimer = function () {\r\n        clearInterval(this._timer);\r\n        this._timer = 0;\r\n        this.timerState = 0;\r\n    };\r\n    GameRkbInfo.prototype.addRightFoul = function () {\r\n        this.rightFoul++;\r\n        return this.rightFoul;\r\n    };\r\n    GameRkbInfo.prototype.minRightFoul = function () {\r\n        this.rightFoul--;\r\n        return this.rightFoul;\r\n    };\r\n    GameRkbInfo.prototype.addLeftFoul = function () {\r\n        this.leftFoul++;\r\n        return this.leftFoul;\r\n    };\r\n    GameRkbInfo.prototype.minLeftFoul = function () {\r\n        this.leftFoul--;\r\n        return this.leftFoul;\r\n    };\r\n    return GameRkbInfo;\r\n}());\r\nexports.GameRkbInfo = GameRkbInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/GameRkbInfo.ts\n// module id = 8\n// module chunks = 0","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BaseInfo_1 = require(\"./BaseInfo\");\r\nvar PlayerDoc = (function () {\r\n    function PlayerDoc() {\r\n        this.id = 0;\r\n        this.name = '';\r\n        this.phone = 0;\r\n        this.eloScore = 0;\r\n        this.style = 0;\r\n        this.avatar = \"\";\r\n        this.height = 0;\r\n        this.weight = 0;\r\n        this.dtScore = 0;\r\n        this.activityId = 0;\r\n        this.gameRec = [];\r\n        this.loseGameCount = 0;\r\n        this.winGameCount = 0;\r\n        this.ftId = 0;\r\n        this.ftScore = 0;\r\n        this.playerNum = 0;\r\n        this.curFtScore = 0;\r\n        this.location = '上海';\r\n    }\r\n    return PlayerDoc;\r\n}());\r\nexports.PlayerDoc = PlayerDoc;\r\nexports.PlayerState1v1 = {\r\n    FIGHTING: ' ',\r\n    PIGEON: '鸽子',\r\n    WAITING: '  ',\r\n    Dead: '淘汰'\r\n};\r\nvar PlayerInfo = (function (_super) {\r\n    __extends(PlayerInfo, _super);\r\n    function PlayerInfo(playerData) {\r\n        _super.call(this);\r\n        this.playerData = new PlayerDoc();\r\n        this.isRed = true;\r\n        this.isMvp = false;\r\n        this.backNumber = 0;\r\n        if (playerData) {\r\n            if (playerData['playerData'] != null) {\r\n                this.playerData = BaseInfo_1.obj2Class(playerData.playerData, PlayerDoc);\r\n                this.setPlayerInfoFromData(playerData);\r\n            }\r\n            else {\r\n                this.playerData = BaseInfo_1.obj2Class(playerData, PlayerDoc);\r\n                this.setPlayerInfoFromData(playerData);\r\n            }\r\n        }\r\n    }\r\n    PlayerInfo.prototype.setPlayerInfoFromData = function (data) {\r\n        if (data['isRed'] != null)\r\n            this.isRed = data.isRed;\r\n        if (data['isMvp'] != null)\r\n            this.isMvp = data.isMvp;\r\n        if (data['backNumber'] != null)\r\n            this.backNumber = data.backNumber;\r\n    };\r\n    PlayerInfo.prototype.getPlayerData = function () {\r\n        this.playerData['isRed'] = this.isRed;\r\n        this.playerData['isMvp'] = this.isMvp;\r\n        this.playerData['backNumber'] = this.backNumber;\r\n        return this.playerData;\r\n    };\r\n    PlayerInfo.prototype.id = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"id\", val);\r\n    };\r\n    PlayerInfo.prototype.phone = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"phone\", val);\r\n    };\r\n    PlayerInfo.prototype.name = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"name\", val);\r\n    };\r\n    PlayerInfo.prototype.activityId = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"activityId\", val);\r\n    };\r\n    PlayerInfo.prototype.eloScore = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"eloScore\", val);\r\n    };\r\n    PlayerInfo.prototype.dtScore = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"dtScore\", val);\r\n    };\r\n    PlayerInfo.prototype.style = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"style\", val);\r\n    };\r\n    PlayerInfo.prototype.avatar = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"avatar\", val);\r\n    };\r\n    PlayerInfo.prototype.gameRec = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"gameRec\", val);\r\n    };\r\n    PlayerInfo.winPercent = function (playerDoc) {\r\n        var p = playerDoc.winGameCount / PlayerInfo.gameCount(playerDoc);\r\n        if (!p)\r\n            p = 0;\r\n        return p;\r\n    };\r\n    PlayerInfo.winPercentStr = function (playerDoc) {\r\n        return (PlayerInfo.winPercent(playerDoc) * 100).toFixed(1) + \"%\";\r\n    };\r\n    PlayerInfo.weight = function (playerDoc) {\r\n        return playerDoc.weight || playerDoc.playerData.weight;\r\n    };\r\n    PlayerInfo.height = function (playerDoc) {\r\n        return playerDoc.height || playerDoc.playerData.height;\r\n    };\r\n    PlayerInfo.intro = function (playerDoc) {\r\n        return playerDoc.intro || playerDoc.playerData.intro;\r\n    };\r\n    PlayerInfo.prototype.winpercent = function (val) {\r\n        return this.winGameCount() / this.gameCount();\r\n    };\r\n    PlayerInfo.gameCount = function (playerDoc) {\r\n        return (playerDoc.loseGameCount + playerDoc.winGameCount) || 0;\r\n    };\r\n    PlayerInfo.addWinGameAmount = function (playerDoc) {\r\n        playerDoc.winGameCount++;\r\n        return playerDoc.winGameCount;\r\n    };\r\n    PlayerInfo.addLoseGameAmount = function (playerDoc) {\r\n        playerDoc.loseGameCount++;\r\n        return playerDoc.loseGameCount;\r\n    };\r\n    PlayerInfo.prototype.gameCount = function () {\r\n        return this.loseGameCount() + this.winGameCount();\r\n    };\r\n    PlayerInfo.prototype.winGameCount = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"winGameCount\", val);\r\n    };\r\n    PlayerInfo.prototype.loseGameCount = function (val) {\r\n        return BaseInfo_1.prop(this.playerData, \"loseGameCount\", val);\r\n    };\r\n    PlayerInfo.prototype.getWinPercent = function () {\r\n        return (this.winpercent() * 100).toFixed(1) + \"%\";\r\n    };\r\n    PlayerInfo.getStyleIcon = function (style) {\r\n        var path = '/img/panel/stage/';\r\n        if (style === 1) {\r\n            path += 'feng.png';\r\n        }\r\n        else if (style === 2) {\r\n            path += 'lin.png';\r\n        }\r\n        else if (style === 3) {\r\n            path += 'huo.png';\r\n        }\r\n        else if (style === 4) {\r\n            path += 'shan.png';\r\n        }\r\n        return path;\r\n    };\r\n    PlayerInfo.prototype.getWinStyleIcon = function () {\r\n        var path = '/img/panel/stage/win/';\r\n        if (this.style() == 1) {\r\n            path += 'fengWin.png';\r\n        }\r\n        else if (this.style() == 2) {\r\n            path += 'linWin.png';\r\n        }\r\n        else if (this.style() == 3) {\r\n            path += 'huoWin.png';\r\n        }\r\n        else if (this.style() == 4) {\r\n            path += 'shanWin.png';\r\n        }\r\n        return path;\r\n    };\r\n    PlayerInfo.prototype.getRec = function () {\r\n        return { id: this.id(), eloScore: this.eloScore(), dtScore: this.dtScore() };\r\n    };\r\n    PlayerInfo.prototype.saveScore = function (dtScore, isWin) {\r\n        this.dtScore(dtScore);\r\n        this.eloScore(this.eloScore() + dtScore);\r\n        if (isWin) {\r\n            this.winGameCount(this.winGameCount() + 1);\r\n        }\r\n        else\r\n            this.loseGameCount(this.loseGameCount() + 1);\r\n    };\r\n    PlayerInfo.prototype.getCurWinningPercent = function () {\r\n        return this.winGameCount() / (this.loseGameCount() + this.winGameCount());\r\n    };\r\n    return PlayerInfo;\r\n}(BaseInfo_1.BaseInfo));\r\nexports.PlayerInfo = PlayerInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/PlayerInfo.ts\n// module id = 9\n// module chunks = 0","\"use strict\";\r\nexports.isdef = function (val) {\r\n    return val != undefined;\r\n};\r\nexports.prop = function (obj, paramName, v, callback) {\r\n    if (exports.isdef(v)) {\r\n        obj[paramName] = v;\r\n        if (callback)\r\n            callback();\r\n    }\r\n    else\r\n        return obj[paramName];\r\n};\r\nexports.obj2Class = function (obj, cls) {\r\n    var c = new cls;\r\n    for (var paramName in obj) {\r\n        c[paramName] = obj[paramName];\r\n    }\r\n    return c;\r\n};\r\nfunction setPropTo(data, obj) {\r\n    for (var key in data) {\r\n        if (obj.hasOwnProperty(key))\r\n            obj[key] = data[key];\r\n    }\r\n}\r\nexports.setPropTo = setPropTo;\r\nvar BaseDoc = (function () {\r\n    function BaseDoc() {\r\n    }\r\n    return BaseDoc;\r\n}());\r\nexports.BaseDoc = BaseDoc;\r\nvar BaseInfo = (function () {\r\n    function BaseInfo() {\r\n    }\r\n    return BaseInfo;\r\n}());\r\nexports.BaseInfo = BaseInfo;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/BaseInfo.ts\n// module id = 10\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"process\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 14\n// module chunks = 0"],"sourceRoot":""}