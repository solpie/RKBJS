{"version":3,"sources":["webpack:///webpack/bootstrap 3e51f5b29f09a154fd41","webpack:///./src/WebServer.ts","webpack:///./src/Env.ts","webpack:///external \"path\"","webpack:///external \"process\"","webpack:///external \"fs\"","webpack:///external \"express\"","webpack:///external \"body-parser\""],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,iCAAiC;AACxE,kCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;;;;;;;ACTtB,kC;;;;;;ACAA,qC;;;;;;ACAA,gC;;;;;;ACAA,qC;;;;;;ACAA,yC","file":"WebServer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3e51f5b29f09a154fd41\n **/","\"use strict\";\r\nvar Env_1 = require(\"./Env\");\r\nvar localhost;\r\nvar WebServer = (function () {\r\n    function WebServer(callback) {\r\n        this.initEnv(callback);\r\n        this.test();\r\n    }\r\n    WebServer.prototype.test = function () {\r\n    };\r\n    WebServer.prototype.initEnv = function (callback) {\r\n        var _this = this;\r\n        var process = require(\"process\");\r\n        Env_1.ServerConf.isDev = process.defaultApp || /[\\\\/]electron-prebuilt[\\\\/]/.test(process.execPath);\r\n        console.log(process.execPath, Env_1.ServerConf.isDev);\r\n        var fs = require('fs');\r\n        fs.readFile('resources/app/package.json', function (err, data) {\r\n            if (err)\r\n                throw err;\r\n            var dataObj = JSON.parse(data);\r\n            Env_1.ServerConf.port = dataObj.server.port;\r\n            _this.initServer();\r\n            _this.serverConf = Env_1.ServerConf;\r\n            console.log(\"server config:\", Env_1.ServerConf);\r\n            if (callback)\r\n                callback(dataObj);\r\n        });\r\n    };\r\n    WebServer.prototype.initServer = function () {\r\n        var _this = this;\r\n        var express = require('express');\r\n        var app = express();\r\n        app.set('views', \"./resources/app/view\");\r\n        app.set('view engine', 'ejs');\r\n        app.use(express.static(\"./resources/app/static\"));\r\n        var bodyParser = require('body-parser');\r\n        app.use(bodyParser.urlencoded({ extended: false, limit: '55mb' }));\r\n        app.use(bodyParser.json({ limit: '50mb' }));\r\n        app.all(\"*\", function (req, res, next) {\r\n            res.header('Access-Control-Allow-Origin', '*');\r\n            res.header(\"Access-Control-Allow-Headers\", \"Content-Type,Content-Length, Authorization, Accept,X-Requested-With\");\r\n            res.header(\"Access-Control-Allow-Methods\", \"PUT,POST,GET,DELETE,OPTIONS\");\r\n            if (req.method == 'OPTIONS') {\r\n                res.send(200);\r\n            }\r\n            else {\r\n                next();\r\n            }\r\n        });\r\n        app.get('/', function (req, res) {\r\n            res.send('hello' + new Date().getDate());\r\n        });\r\n        app.listen(Env_1.ServerConf.port, function () {\r\n            _this.initSocketIO();\r\n            console.log(\"server on:  ws port:\");\r\n        });\r\n    };\r\n    WebServer.prototype.initSocketIO = function () {\r\n    };\r\n    return WebServer;\r\n}());\r\nexports.WebServer = WebServer;\r\nexports.serverConf = Env_1.ServerConf;\r\nexports.webServer = new WebServer();\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/WebServer.ts\n ** module id = 0\n ** module chunks = 0\n **/","\"use strict\";\r\nvar Node_path = require(\"path\");\r\nexports._path = function (path) {\r\n    if (!exports.ServerConf.isDev)\r\n        return Node_path.join('resources', path);\r\n    return path;\r\n};\r\nexports._asar = function (path) {\r\n};\r\nexports.ServerConf = { isDev: false, hupuWsUrl: '' };\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Env.ts\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"process\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"process\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"express\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"body-parser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"body-parser\"\n ** module id = 6\n ** module chunks = 0\n **/"],"sourceRoot":""}